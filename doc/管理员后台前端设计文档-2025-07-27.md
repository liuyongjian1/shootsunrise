# 个人摄影师微信小程序 - 管理员后台前端设计文档

**文档版本：** v1.0  
**创建日期：** 2025-07-27
**作者：** 开发团队  

## 📋 文档概述

本文档详细描述了个人摄影师微信小程序管理员后台前端的设计方案，包括页面结构、组件设计、路由配置、状态管理等技术实现细节。

## 🎯 开发优先级说明

**优先开发模块：**
- ✅ 用户管理模块
- ✅ 内容管理模块（作品审核）
- ✅ 摄影师认证管理
- ✅ 系统配置模块
- ✅ 数据统计模块

**后期考虑开发：**
- 🔄 预约订单管理模块（包含支付管理）
- 🔄 消息推送模块

## 🏗️ 技术架构

### 技术栈选型
- **框架**: Vue 3.x + TypeScript
- **构建工具**: Vite 4.x
- **UI组件库**: Ant Design Vue 4.x
- **状态管理**: Pinia
- **路由管理**: Vue Router 4.x
- **HTTP客户端**: Axios
- **图表库**: ECharts 5.x
- **富文本编辑器**: TinyMCE
- **表格组件**: Ant Design Vue Table (支持虚拟滚动)

### 项目结构
```
admin-frontend/
├── public/                         # 静态资源
│   ├── favicon.ico
│   └── index.html
├── src/                           # 源码目录
│   ├── main.ts                    # 入口文件
│   ├── App.vue                    # 根组件
│   ├── assets/                    # 静态资源
│   │   ├── images/                # 图片资源
│   │   ├── icons/                 # 图标资源
│   │   └── styles/                # 样式文件
│   │       ├── variables.less     # 变量定义
│   │       ├── mixins.less        # 混入样式
│   │       ├── common.less        # 通用样式
│   │       └── antd-theme.less    # Ant Design主题
│   ├── components/                # 公共组件
│   │   ├── layout/                # 布局组件
│   │   │   ├── AdminLayout.vue    # 管理布局
│   │   │   ├── Sidebar.vue        # 侧边栏
│   │   │   ├── Header.vue         # 顶部栏
│   │   │   └── Breadcrumb.vue     # 面包屑
│   │   ├── common/                # 通用组件
│   │   │   ├── PageContainer.vue  # 页面容器
│   │   │   ├── SearchForm.vue     # 搜索表单
│   │   │   ├── DataTable.vue      # 数据表格
│   │   │   ├── ImageUpload.vue    # 图片上传
│   │   │   ├── RichEditor.vue     # 富文本编辑器
│   │   │   └── ChartContainer.vue # 图表容器
│   │   └── business/              # 业务组件
│   │       ├── UserStatusTag.vue  # 用户状态标签
│   │       ├── PortfolioCard.vue  # 作品卡片
│   │       └── StatisticCard.vue  # 统计卡片
│   ├── views/                     # 页面组件
│   │   ├── login/                 # 登录页面
│   │   │   └── LoginView.vue
│   │   ├── dashboard/             # 仪表盘
│   │   │   └── DashboardView.vue
│   │   ├── user/                  # 用户管理
│   │   │   ├── UserList.vue       # 用户列表
│   │   │   ├── UserDetail.vue     # 用户详情
│   │   │   └── PhotographerAudit.vue # 摄影师审核
│   │   ├── content/               # 内容管理
│   │   │   ├── PortfolioList.vue  # 作品列表
│   │   │   ├── PortfolioAudit.vue # 作品审核
│   │   │   └── CategoryManage.vue # 分类管理
│   │   ├── promotion/             # 营销管理
│   │   │   ├── PromotionList.vue  # 活动列表
│   │   │   └── PromotionDetail.vue # 活动详情
│   │   ├── system/                # 系统管理
│   │   │   ├── ConfigManage.vue   # 配置管理
│   │   │   ├── LogManage.vue      # 日志管理
│   │   │   └── AdminManage.vue    # 管理员管理
│   │   └── statistics/            # 数据统计
│   │       ├── UserStatistics.vue # 用户统计
│   │       ├── ContentStatistics.vue # 内容统计
│   │       └── BusinessStatistics.vue # 业务统计
│   ├── router/                    # 路由配置
│   │   ├── index.ts               # 路由入口
│   │   ├── routes.ts              # 路由定义
│   │   └── guards.ts              # 路由守卫
│   ├── store/                     # 状态管理
│   │   ├── index.ts               # Store入口
│   │   ├── modules/               # 模块
│   │   │   ├── auth.ts            # 认证状态
│   │   │   ├── user.ts            # 用户状态
│   │   │   ├── app.ts             # 应用状态
│   │   │   └── permission.ts      # 权限状态
│   ├── api/                       # API接口
│   │   ├── index.ts               # API入口
│   │   ├── request.ts             # 请求封装
│   │   ├── auth.ts                # 认证接口
│   │   ├── user.ts                # 用户接口
│   │   ├── content.ts             # 内容接口
│   │   ├── system.ts              # 系统接口
│   │   └── statistics.ts          # 统计接口
│   ├── utils/                     # 工具函数
│   │   ├── request.ts             # 请求工具
│   │   ├── auth.ts                # 认证工具
│   │   ├── storage.ts             # 存储工具
│   │   ├── validator.ts           # 验证工具
│   │   ├── formatter.ts           # 格式化工具
│   │   └── constants.ts           # 常量定义
│   ├── types/                     # 类型定义
│   │   ├── api.ts                 # API类型
│   │   ├── user.ts                # 用户类型
│   │   ├── content.ts             # 内容类型
│   │   └── common.ts              # 通用类型
│   └── hooks/                     # 组合式函数
│       ├── useAuth.ts             # 认证Hook
│       ├── useTable.ts            # 表格Hook
│       ├── useForm.ts             # 表单Hook
│       └── useChart.ts            # 图表Hook
├── package.json                   # 依赖配置
├── vite.config.ts                 # Vite配置
├── tsconfig.json                  # TypeScript配置
├── .eslintrc.js                   # ESLint配置
└── .prettierrc                    # Prettier配置
```

## 🎨 UI设计规范

### 设计系统

#### 色彩规范
```less
// 主色调
@primary-color: #1890ff;           // 主色
@primary-1: #e6f7ff;               // 主色浅色
@primary-2: #bae7ff;               // 主色较浅
@primary-3: #91d5ff;               // 主色中浅
@primary-4: #69c0ff;               // 主色中色
@primary-5: #40a9ff;               // 主色中深
@primary-6: #1890ff;               // 主色
@primary-7: #096dd9;               // 主色深色
@primary-8: #0050b3;               // 主色较深
@primary-9: #003a8c;               // 主色最深
@primary-10: #002766;              // 主色极深

// 功能色
@success-color: #52c41a;           // 成功色
@warning-color: #faad14;           // 警告色
@error-color: #ff4d4f;             // 错误色
@info-color: #1890ff;              // 信息色

// 中性色
@heading-color: rgba(0, 0, 0, 0.85); // 标题色
@text-color: rgba(0, 0, 0, 0.65);    // 主文本色
@text-color-secondary: rgba(0, 0, 0, 0.45); // 次文本色
@disabled-color: rgba(0, 0, 0, 0.25); // 失效色
@border-color-base: #d9d9d9;         // 边框色
@background-color-light: #fafafa;    // 浅背景色
@background-color-base: #f5f5f5;     // 背景色
```

#### 布局规范
```less
// 布局尺寸
@layout-header-height: 64px;        // 头部高度
@layout-sidebar-width: 256px;       // 侧边栏宽度
@layout-sidebar-collapsed-width: 80px; // 侧边栏收起宽度
@layout-content-padding: 24px;      // 内容区域内边距

// 组件尺寸
@component-height-base: 32px;       // 基础组件高度
@component-height-lg: 40px;         // 大尺寸组件高度
@component-height-sm: 24px;         // 小尺寸组件高度

// 间距
@padding-xs: 8px;
@padding-sm: 12px;
@padding-md: 16px;
@padding-lg: 24px;
@padding-xl: 32px;

// 圆角
@border-radius-base: 6px;
@border-radius-sm: 4px;
@border-radius-lg: 8px;
```

### 组件设计规范

#### 页面容器组件
```vue
<!-- PageContainer.vue -->
<template>
  <div class="page-container">
    <!-- 页面头部 -->
    <div class="page-header" v-if="showHeader">
      <div class="page-header-content">
        <div class="page-title">
          <h1>{{ title }}</h1>
          <p v-if="description" class="page-description">{{ description }}</p>
        </div>
        <div class="page-extra" v-if="$slots.extra">
          <slot name="extra"></slot>
        </div>
      </div>
    </div>
    
    <!-- 页面内容 -->
    <div class="page-content">
      <slot></slot>
    </div>
  </div>
</template>

<script setup lang="ts">
interface Props {
  title: string
  description?: string
  showHeader?: boolean
}

withDefaults(defineProps<Props>(), {
  showHeader: true
})
</script>

<style lang="less" scoped>
.page-container {
  min-height: 100%;
  background: @background-color-light;
}

.page-header {
  background: #fff;
  padding: @padding-lg;
  margin-bottom: @padding-lg;
  border-bottom: 1px solid @border-color-base;
  
  &-content {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }
}

.page-title {
  h1 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
    color: @heading-color;
  }
}

.page-description {
  margin: 8px 0 0;
  color: @text-color-secondary;
  font-size: 14px;
}

.page-content {
  padding: 0 @padding-lg @padding-lg;
}
</style>
```

#### 数据表格组件
```vue
<!-- DataTable.vue -->
<template>
  <div class="data-table">
    <!-- 搜索表单 -->
    <div class="table-toolbar" v-if="showSearch || $slots.toolbar">
      <div class="table-search" v-if="showSearch">
        <slot name="search">
          <SearchForm 
            :fields="searchFields" 
            @search="handleSearch"
            @reset="handleReset"
          />
        </slot>
      </div>
      <div class="table-actions" v-if="$slots.toolbar">
        <slot name="toolbar"></slot>
      </div>
    </div>
    
    <!-- 数据表格 -->
    <a-table
      :columns="columns"
      :data-source="dataSource"
      :loading="loading"
      :pagination="paginationConfig"
      :row-selection="rowSelection"
      :scroll="scroll"
      @change="handleTableChange"
      v-bind="$attrs"
    >
      <!-- 动态插槽 -->
      <template v-for="(_, name) in $slots" :key="name" #[name]="slotData">
        <slot :name="name" v-bind="slotData"></slot>
      </template>
    </a-table>
  </div>
</template>

<script setup lang="ts">
import { computed, ref, watch } from 'vue'
import type { TableColumnsType, TableProps } from 'ant-design-vue'

interface Props {
  columns: TableColumnsType
  dataSource: any[]
  loading?: boolean
  showSearch?: boolean
  searchFields?: any[]
  pagination?: any
  rowSelection?: TableProps['rowSelection']
  scroll?: TableProps['scroll']
}

const props = withDefaults(defineProps<Props>(), {
  loading: false,
  showSearch: true,
  pagination: () => ({
    current: 1,
    pageSize: 10,
    total: 0,
    showSizeChanger: true,
    showQuickJumper: true,
    showTotal: (total: number) => `共 ${total} 条记录`
  })
})

const emit = defineEmits<{
  search: [params: any]
  reset: []
  change: [pagination: any, filters: any, sorter: any]
}>()

// 分页配置
const paginationConfig = computed(() => {
  if (props.pagination === false) return false
  return {
    ...props.pagination,
    onChange: (page: number, pageSize: number) => {
      emit('change', { current: page, pageSize }, {}, {})
    },
    onShowSizeChange: (current: number, size: number) => {
      emit('change', { current: 1, pageSize: size }, {}, {})
    }
  }
})

// 搜索处理
const handleSearch = (params: any) => {
  emit('search', params)
}

const handleReset = () => {
  emit('reset')
}

// 表格变化处理
const handleTableChange = (pagination: any, filters: any, sorter: any) => {
  emit('change', pagination, filters, sorter)
}
</script>

<style lang="less" scoped>
.data-table {
  background: #fff;
  border-radius: @border-radius-base;
  
  .table-toolbar {
    padding: @padding-lg;
    border-bottom: 1px solid @border-color-base;
    display: flex;
    justify-content: space-between;
    align-items: center;
    
    .table-search {
      flex: 1;
    }
    
    .table-actions {
      margin-left: @padding-lg;
    }
  }
}
</style>
```

## 🔐 认证与权限设计

### 认证状态管理
```typescript
// store/modules/auth.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import type { AdminUser, LoginParams } from '@/types/auth'
import { login, logout, getUserInfo } from '@/api/auth'
import { getToken, setToken, removeToken } from '@/utils/auth'

export const useAuthStore = defineStore('auth', () => {
  // 状态
  const token = ref<string>(getToken() || '')
  const userInfo = ref<AdminUser | null>(null)
  const permissions = ref<string[]>([])
  const roles = ref<string[]>([])

  // 计算属性
  const isLoggedIn = computed(() => !!token.value)
  const hasPermission = computed(() => (permission: string) => {
    return permissions.value.includes(permission)
  })
  const hasRole = computed(() => (role: string) => {
    return roles.value.includes(role)
  })

  // 登录
  const loginAction = async (params: LoginParams) => {
    try {
      const response = await login(params)
      const { token: accessToken, userInfo: user } = response.data
      
      // 保存token
      token.value = accessToken
      setToken(accessToken)
      
      // 保存用户信息
      userInfo.value = user
      permissions.value = user.permissions || []
      roles.value = user.roles || []
      
      return response
    } catch (error) {
      throw error
    }
  }

  // 获取用户信息
  const getUserInfoAction = async () => {
    try {
      const response = await getUserInfo()
      const user = response.data
      
      userInfo.value = user
      permissions.value = user.permissions || []
      roles.value = user.roles || []
      
      return user
    } catch (error) {
      throw error
    }
  }

  // 退出登录
  const logoutAction = async () => {
    try {
      await logout()
    } catch (error) {
      console.error('退出登录失败:', error)
    } finally {
      // 清除本地数据
      token.value = ''
      userInfo.value = null
      permissions.value = []
      roles.value = []
      removeToken()
    }
  }

  return {
    // 状态
    token,
    userInfo,
    permissions,
    roles,
    // 计算属性
    isLoggedIn,
    hasPermission,
    hasRole,
    // 方法
    loginAction,
    getUserInfoAction,
    logoutAction
  }
})
```

### 路由权限守卫
```typescript
// router/guards.ts
import type { Router } from 'vue-router'
import { useAuthStore } from '@/store/modules/auth'
import { message } from 'ant-design-vue'

export function setupRouterGuards(router: Router) {
  // 前置守卫
  router.beforeEach(async (to, from, next) => {
    const authStore = useAuthStore()
    
    // 1. 检查是否需要登录
    if (to.meta.requiresAuth && !authStore.isLoggedIn) {
      message.warning('请先登录')
      next({ name: 'Login', query: { redirect: to.fullPath } })
      return
    }
    
    // 2. 已登录用户访问登录页，重定向到首页
    if (to.name === 'Login' && authStore.isLoggedIn) {
      next({ name: 'Dashboard' })
      return
    }
    
    // 3. 检查权限
    if (to.meta.permission && !authStore.hasPermission(to.meta.permission)) {
      message.error('没有访问权限')
      next({ name: 'Dashboard' })
      return
    }
    
    // 4. 检查角色
    if (to.meta.roles && !to.meta.roles.some(role => authStore.hasRole(role))) {
      message.error('没有访问权限')
      next({ name: 'Dashboard' })
      return
    }
    
    next()
  })
  
  // 后置守卫
  router.afterEach((to) => {
    // 设置页面标题
    document.title = to.meta.title ? `${to.meta.title} - 摄影师平台管理后台` : '摄影师平台管理后台'
  })
}
```

## 🎯 管理后台开发计划

### 第一期开发计划 (4周)

#### 第一阶段：基础框架搭建 (1周)

**Week 1: 项目初始化与基础布局**
- Vue 3 + TypeScript项目搭建
- Ant Design Vue组件库集成
- 路由配置与权限守卫
- 基础布局组件开发（侧边栏、顶部栏、面包屑）
- 登录页面开发

#### 第二阶段：用户管理模块 (1周)

**Week 2: 用户管理功能**
- 用户列表页面开发
- 用户详情页面开发
- 用户搜索和筛选功能
- 用户状态管理功能
- 摄影师认证审核页面

#### 第三阶段：内容管理模块 (1周)

**Week 3: 内容审核功能**
- 作品审核列表页面
- 作品详情审核页面
- 批量审核功能
- 审核规则配置页面
- 内容分类管理

#### 第四阶段：系统管理与统计 (1周)

**Week 4: 系统配置与数据统计**
- 系统配置管理页面
- 数据统计仪表盘
- 用户统计报表
- 内容统计报表
- 系统日志管理

### 第二期开发计划 (后期扩展)

#### 订单管理模块 (2周)
- **Week 1**: 订单列表和详情管理
- **Week 2**: 支付管理和退款处理

#### 消息推送模块 (1周)
- **Week 1**: 消息推送管理和模板配置

### 页面开发优先级

#### 高优先级页面 (第一期必须完成)
1. **登录页面** - 管理员身份验证
2. **仪表盘** - 数据概览和快捷操作
3. **用户管理** - 用户列表和详情管理
4. **摄影师审核** - 摄影师认证审核
5. **作品审核** - 内容审核管理
6. **系统配置** - 基础配置管理

#### 中优先级页面 (第一期选择性完成)
1. **数据统计** - 详细统计报表
2. **日志管理** - 系统操作日志
3. **分类管理** - 作品分类配置

#### 低优先级页面 (第二期开发)
1. **订单管理** - 订单和支付管理
2. **消息推送** - 推送消息管理
3. **高级配置** - 复杂业务配置

### 功能模块详细规划

#### 用户管理模块
```typescript
// 用户管理功能清单
interface UserManagementFeatures {
  userList: {
    search: boolean;      // 用户搜索
    filter: boolean;      // 条件筛选
    pagination: boolean;  // 分页显示
    export: boolean;      // 数据导出
  };
  userDetail: {
    basicInfo: boolean;   // 基础信息查看
    statusManage: boolean; // 状态管理
    loginHistory: boolean; // 登录历史
    operationLog: boolean; // 操作日志
  };
  photographerAudit: {
    applicationList: boolean; // 申请列表
    auditProcess: boolean;    // 审核流程
    materialReview: boolean;  // 材料审查
    batchOperation: boolean;  // 批量操作
  };
}
```

#### 内容管理模块
```typescript
// 内容管理功能清单
interface ContentManagementFeatures {
  portfolioAudit: {
    pendingList: boolean;     // 待审核列表
    auditDetail: boolean;     // 审核详情
    batchAudit: boolean;      // 批量审核
    auditHistory: boolean;    // 审核历史
  };
  categoryManage: {
    categoryTree: boolean;    // 分类树管理
    categoryEdit: boolean;    // 分类编辑
    sortManage: boolean;      // 排序管理
    statusControl: boolean;   // 状态控制
  };
}
```

### 技术实现要求

#### 性能要求
- 页面加载时间 ≤ 2秒
- 大数据量表格虚拟滚动
- 图片懒加载和预览优化
- 接口请求防抖和节流

#### 用户体验要求
- 响应式设计，适配不同屏幕
- 操作确认和错误提示
- 加载状态和进度显示
- 快捷键支持

#### 安全要求
- 权限控制到按钮级别
- 敏感操作二次确认
- 操作日志记录
- 会话超时处理

### 开发里程碑

| 里程碑 | 完成时间 | 主要成果 |
|--------|----------|----------|
| 基础框架完成 | Week 1 | 可运行的后台框架，登录功能可用 |
| 用户管理完成 | Week 2 | 用户管理和摄影师审核功能完整 |
| 内容管理完成 | Week 3 | 作品审核和内容管理功能完整 |
| 第一期完成 | Week 4 | 完整的管理后台系统，可以投入使用 |

---

**文档状态：** ✅ 已完成
**下一步：** 按照开发计划开始管理后台基础框架搭建
**联系人：** 开发团队
