# ä¸ªäººæ‘„å½±å¸ˆå¾®ä¿¡å°ç¨‹åº - åç«¯APIæ¥å£æ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0  
**åˆ›å»ºæ—¥æœŸï¼š** 2025-07-27  
**ä½œè€…ï¼š** å¼€å‘å›¢é˜Ÿ  

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†ä¸ªäººæ‘„å½±å¸ˆå¾®ä¿¡å°ç¨‹åºåç«¯APIæ¥å£çš„è®¾è®¡è§„èŒƒã€æ¥å£å®šä¹‰å’Œä½¿ç”¨è¯´æ˜ã€‚

## ğŸ”Œ APIåŸºç¡€è§„èŒƒ

### åŸºç¡€ä¿¡æ¯
- **å°ç¨‹åºAPI**: `https://api.shootsunrise.com/miniapp/api/v1`
- **ç®¡ç†åå°API**: `https://api.shootsunrise.com/admin/api/v1`
- **è®¤è¯æ–¹å¼**: JWT Token
- **è¯·æ±‚æ ¼å¼**: JSON
- **å“åº”æ ¼å¼**: ç»Ÿä¸€ ApiResponse æ ¼å¼

### ç»Ÿä¸€å“åº”æ ¼å¼
```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": 1642752000000,
  "traceId": "abc123"
}
```

### åˆ†é¡µå“åº”æ ¼å¼
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [],
    "total": 100,
    "pageNum": 1,
    "pageSize": 10,
    "totalPages": 10
  },
  "timestamp": 1642752000000,
  "traceId": "abc123"
}
```

### é”™è¯¯å“åº”æ ¼å¼
```json
{
  "code": 400,
  "message": "å‚æ•°é”™è¯¯",
  "data": null,
  "timestamp": 1642752000000,
  "traceId": "abc123"
}
```

#### è§’è‰²åˆ‡æ¢
```
POST /miniapp/api/v1/auth/switchRole
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "targetRole": "PHOTOGRAPHER"
}
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "success": true,
  "currentRole": "PHOTOGRAPHER",
  "needCertification": true
}
```

#### æ‘„å½±å¸ˆè®¤è¯ç”³è¯·
```
POST /miniapp/api/v1/auth/photographerCertification
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "realName": "å¼ ä¸‰",
  "idCard": "åŠ å¯†èº«ä»½è¯å·",
  "bio": "ä¸ªäººç®€ä»‹",
  "specialties": ["äººåƒ", "é£æ™¯"],
  "experienceYears": 5,
  "serviceAreas": ["åŒ—äº¬", "ä¸Šæµ·"],
  "contactWechat": "wechat123",
  "contactPhone": "13800138000",
  "portfolioImages": ["image1.jpg", "image2.jpg"]
}
```

#### è·å–è®¤è¯çŠ¶æ€
```
GET /miniapp/api/v1/auth/certificationStatus
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "status": "PENDING",
  "submittedAt": "2025-07-27T10:00:00Z",
  "reviewedAt": null,
  "rejectionReason": null
}
```

## ğŸ” è®¤è¯æˆæƒ

### è®¤è¯æµç¨‹
1. å®¢æˆ·ç«¯è°ƒç”¨ç™»å½•æ¥å£è·å–Token
2. åç»­è¯·æ±‚åœ¨Headerä¸­æºå¸¦Token
3. æœåŠ¡ç«¯éªŒè¯Tokenæœ‰æ•ˆæ€§
4. Tokenè¿‡æœŸè‡ªåŠ¨åˆ·æ–°

### è¯·æ±‚å¤´æ ¼å¼
```
Authorization: Bearer {access_token}
Content-Type: application/json
```

## ğŸ“± å°ç¨‹åºAPIæ¥å£

### 1. ç”¨æˆ·è®¤è¯æ¨¡å—

#### å¾®ä¿¡ç™»å½•
```
POST /miniapp/api/v1/auth/wxLogin
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "code": "å¾®ä¿¡æˆæƒç "
}
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "accessToken": "è®¿é—®ä»¤ç‰Œ",
  "refreshToken": "åˆ·æ–°ä»¤ç‰Œ",
  "tokenType": "Bearer",
  "expiresIn": 604800,
  "userInfo": {
    "id": 1,
    "nickname": "ç”¨æˆ·æ˜µç§°",
    "avatar": "å¤´åƒURL",
    "currentRole": "CLIENT"
  }
}
```

#### åˆ·æ–°Token
```
POST /miniapp/api/v1/auth/refresh
```

#### è§’è‰²åˆ‡æ¢
```
POST /miniapp/api/v1/auth/switchRole
```

#### é€€å‡ºç™»å½•
```
POST /miniapp/api/v1/auth/logout
```

### 2. ç”¨æˆ·ç®¡ç†æ¨¡å—

#### è·å–ç”¨æˆ·ä¿¡æ¯
```
GET /miniapp/api/v1/users/profile
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "id": 1,
  "openid": "wx_openid_123",
  "nickname": "ç”¨æˆ·æ˜µç§°",
  "avatar": "https://avatar.url",
  "phone": "13800138000",
  "gender": 1,
  "city": "åŒ—äº¬",
  "province": "åŒ—äº¬",
  "currentRole": "CLIENT",
  "availableRoles": ["CLIENT", "PHOTOGRAPHER"],
  "status": 1,
  "lastLoginAt": "2025-07-27T10:00:00Z",
  "createdAt": "2025-01-01T00:00:00Z"
}
```

#### æ›´æ–°ç”¨æˆ·ä¿¡æ¯
```
PUT /miniapp/api/v1/users/profile
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "nickname": "æ–°æ˜µç§°",
  "avatar": "new_avatar.jpg",
  "phone": "13800138000",
  "gender": 1,
  "city": "ä¸Šæµ·",
  "province": "ä¸Šæµ·"
}
```

#### è·å–ç”¨æˆ·ç»Ÿè®¡
```
GET /miniapp/api/v1/users/statistics
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "portfolioCount": 25,
  "likeCount": 340,
  "collectCount": 89,
  "viewCount": 1200,
  "followerCount": 56,
  "followingCount": 23
}
```

#### è·å–ç”¨æˆ·æ”¶è—
```
GET /miniapp/api/v1/users/collections
```
**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=10&type=portfolio
```

#### è·å–ç”¨æˆ·ç‚¹èµ
```
GET /miniapp/api/v1/users/likes
```

#### å…³æ³¨æ‘„å½±å¸ˆ
```
POST /miniapp/api/v1/users/follow/{photographerId}
```

#### å–æ¶ˆå…³æ³¨
```
DELETE /miniapp/api/v1/users/follow/{photographerId}
```

#### è·å–å…³æ³¨åˆ—è¡¨
```
GET /miniapp/api/v1/users/following
```

#### è·å–ç²‰ä¸åˆ—è¡¨
```
GET /miniapp/api/v1/users/followers
```

#### ç”³è¯·æ‘„å½±å¸ˆè®¤è¯
```
POST /miniapp/api/v1/users/photographer/apply
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "realName": "å¼ ä¸‰",
  "idCard": "åŠ å¯†èº«ä»½è¯å·",
  "bio": "ä¸“ä¸šæ‘„å½±å¸ˆï¼Œä»ä¸š5å¹´",
  "specialties": ["äººåƒ", "é£æ™¯"],
  "experienceYears": 5,
  "serviceAreas": ["åŒ—äº¬", "ä¸Šæµ·"],
  "contactWechat": "wechat123",
  "contactPhone": "13800138000",
  "portfolioImages": ["image1.jpg", "image2.jpg"]
}
```

#### è·å–æ‘„å½±å¸ˆèµ„æ–™
```
GET /miniapp/api/v1/users/photographer/profile
```

#### æ›´æ–°æ‘„å½±å¸ˆèµ„æ–™
```
PUT /miniapp/api/v1/users/photographer/profile
```

### 3. ä½œå“ç®¡ç†æ¨¡å—

#### è·å–ä½œå“åˆ—è¡¨
```
GET /miniapp/api/v1/portfolios
```
**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=10&category=äººåƒ&style=æ¸…æ–°&photographerId=123&keyword=å©šçº±
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "records": [
    {
      "id": 1,
      "title": "æ˜¥æ—¥å†™çœŸ",
      "description": "æ¸…æ–°è‡ªç„¶çš„æ˜¥æ—¥å†™çœŸä½œå“",
      "coverImage": "https://oss.example.com/cover1.jpg",
      "images": ["image1.jpg", "image2.jpg"],
      "category": "äººåƒ",
      "style": "æ¸…æ–°",
      "tags": ["æ˜¥å¤©", "æˆ·å¤–"],
      "photographerId": 123,
      "photographerName": "å¼ æ‘„å½±å¸ˆ",
      "photographerAvatar": "avatar.jpg",
      "likeCount": 88,
      "viewCount": 1200,
      "isLiked": false,
      "isCollected": false,
      "createdAt": "2025-07-27T10:00:00Z"
    }
  ],
  "total": 100,
  "pageNum": 1,
  "pageSize": 10
}
```

#### è·å–ä½œå“è¯¦æƒ…
```
GET /miniapp/api/v1/portfolios/{id}
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "id": 1,
  "title": "æ˜¥æ—¥å†™çœŸ",
  "description": "è¯¦ç»†çš„ä½œå“æè¿°...",
  "coverImage": "https://oss.example.com/cover1.jpg",
  "images": [
    {
      "url": "https://oss.example.com/image1.jpg",
      "thumbnail": "https://oss.example.com/thumb1.jpg",
      "width": 1920,
      "height": 1080
    }
  ],
  "category": "äººåƒ",
  "style": "æ¸…æ–°",
  "tags": ["æ˜¥å¤©", "æˆ·å¤–"],
  "shootingLocation": "åŒ—äº¬Â·æœé˜³å…¬å›­",
  "shootingDate": "2025-07-20",
  "cameraInfo": "Canon EOS R5",
  "photographerId": 123,
  "photographerInfo": {
    "id": 123,
    "name": "å¼ æ‘„å½±å¸ˆ",
    "avatar": "avatar.jpg",
    "rating": 4.8,
    "totalWorks": 156
  },
  "likeCount": 88,
  "viewCount": 1200,
  "isLiked": false,
  "isCollected": false,
  "createdAt": "2025-07-27T10:00:00Z"
}
```

#### åˆ›å»ºä½œå“
```
POST /miniapp/api/v1/portfolios
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "title": "æ˜¥æ—¥å†™çœŸ",
  "description": "æ¸…æ–°è‡ªç„¶çš„æ˜¥æ—¥å†™çœŸä½œå“",
  "coverImage": "cover1.jpg",
  "images": ["image1.jpg", "image2.jpg", "image3.jpg"],
  "category": "äººåƒ",
  "style": "æ¸…æ–°",
  "tags": ["æ˜¥å¤©", "æˆ·å¤–"],
  "shootingLocation": "åŒ—äº¬Â·æœé˜³å…¬å›­",
  "shootingDate": "2025-07-20",
  "cameraInfo": "Canon EOS R5",
  "isPublic": true,
  "isFeatured": false
}
```

#### æ›´æ–°ä½œå“
```
PUT /miniapp/api/v1/portfolios/{id}
```
**è¯·æ±‚å‚æ•°ï¼š** åŒåˆ›å»ºä½œå“

#### åˆ é™¤ä½œå“
```
DELETE /miniapp/api/v1/portfolios/{id}
```

#### ç‚¹èµä½œå“
```
POST /miniapp/api/v1/portfolios/{id}/like
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "isLiked": true,
  "likeCount": 89
}
```

#### æ”¶è—ä½œå“
```
POST /miniapp/api/v1/portfolios/{id}/collect
```

#### è·å–æˆ‘çš„ä½œå“
```
GET /miniapp/api/v1/portfolios/my
```

#### å›¾ç‰‡ä¸Šä¼ 
```
POST /miniapp/api/v1/portfolios/upload
```
**è¯·æ±‚å‚æ•°ï¼š** FormData
- file: å›¾ç‰‡æ–‡ä»¶
- type: å›¾ç‰‡ç±»å‹ (cover/content)

**å“åº”æ•°æ®ï¼š**
```json
{
  "url": "https://oss.example.com/image123.jpg",
  "thumbnail": "https://oss.example.com/thumb123.jpg",
  "filename": "image123.jpg",
  "size": 1024000
}
```

### 4. æ‘„å½±å¸ˆç®¡ç†æ¨¡å—

#### è·å–æ‘„å½±å¸ˆåˆ—è¡¨
```
GET /miniapp/api/v1/photographers
```
**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=10&city=åŒ—äº¬&specialty=äººåƒ&sortBy=rating
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "records": [
    {
      "id": 123,
      "name": "å¼ æ‘„å½±å¸ˆ",
      "avatar": "avatar.jpg",
      "bio": "ä¸“ä¸šäººåƒæ‘„å½±å¸ˆ",
      "specialties": ["äººåƒ", "å©šçº±"],
      "city": "åŒ—äº¬",
      "rating": 4.8,
      "totalWorks": 156,
      "completedOrders": 89,
      "isOnline": true,
      "isFeatured": true
    }
  ],
  "total": 50,
  "pageNum": 1,
  "pageSize": 10
}
```

#### è·å–æ‘„å½±å¸ˆè¯¦æƒ…
```
GET /miniapp/api/v1/photographers/{id}
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "id": 123,
  "name": "å¼ æ‘„å½±å¸ˆ",
  "avatar": "avatar.jpg",
  "bio": "ä¸“ä¸šäººåƒæ‘„å½±å¸ˆï¼Œä»ä¸š5å¹´...",
  "specialties": ["äººåƒ", "å©šçº±"],
  "experienceYears": 5,
  "serviceAreas": ["åŒ—äº¬", "ä¸Šæµ·"],
  "contactWechat": "wechat123",
  "contactPhone": "13800138000",
  "rating": 4.8,
  "totalWorks": 156,
  "completedOrders": 89,
  "totalRevenue": 50000.00,
  "isOnline": true,
  "isFeatured": true,
  "certificationStatus": "APPROVED",
  "joinedAt": "2024-01-01T00:00:00Z"
}
```

#### è·å–æ‘„å½±å¸ˆä½œå“
```
GET /miniapp/api/v1/photographers/{id}/portfolios
```

#### è·å–æ‘„å½±å¸ˆç»Ÿè®¡
```
GET /miniapp/api/v1/photographers/{id}/statistics
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "totalWorks": 156,
  "totalViews": 12000,
  "totalLikes": 3400,
  "totalCollects": 890,
  "monthlyStats": [
    {
      "month": "2025-07",
      "works": 12,
      "views": 1200,
      "likes": 340
    }
  ]
}
```

### 5. è¥é”€æ¨å¹¿æ¨¡å—

#### è·å–è¥é”€æ´»åŠ¨åˆ—è¡¨
```
GET /miniapp/api/v1/promotions
```
**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=10&status=ACTIVE&photographerId=123
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "records": [
    {
      "id": 1,
      "title": "æ˜¥å­£æ‹æ‘„ä¼˜æƒ ",
      "description": "æ˜¥å­£äººåƒæ‹æ‘„8æŠ˜ä¼˜æƒ ",
      "type": "DISCOUNT",
      "discountType": "PERCENTAGE",
      "discountValue": 20,
      "minAmount": 500,
      "posterImage": "poster.jpg",
      "startTime": "2025-07-01T00:00:00Z",
      "endTime": "2025-07-31T23:59:59Z",
      "status": "ACTIVE",
      "participantCount": 25,
      "photographerId": 123,
      "photographerName": "å¼ æ‘„å½±å¸ˆ"
    }
  ],
  "total": 10,
  "pageNum": 1,
  "pageSize": 10
}
```

#### è·å–æ´»åŠ¨è¯¦æƒ…
```
GET /miniapp/api/v1/promotions/{id}
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "id": 1,
  "title": "æ˜¥å­£æ‹æ‘„ä¼˜æƒ ",
  "description": "æ˜¥å­£äººåƒæ‹æ‘„8æŠ˜ä¼˜æƒ ï¼Œé™æ—¶ç‰¹æƒ ...",
  "type": "DISCOUNT",
  "discountType": "PERCENTAGE",
  "discountValue": 20,
  "minAmount": 500,
  "maxDiscount": 200,
  "posterImage": "poster.jpg",
  "bannerImage": "banner.jpg",
  "startTime": "2025-07-01T00:00:00Z",
  "endTime": "2025-07-31T23:59:59Z",
  "status": "ACTIVE",
  "participantCount": 25,
  "usageLimit": 100,
  "userLimit": 1,
  "photographerId": 123,
  "photographerInfo": {
    "id": 123,
    "name": "å¼ æ‘„å½±å¸ˆ",
    "avatar": "avatar.jpg"
  },
  "rules": ["ä»…é™æ–°ç”¨æˆ·", "ä¸å¯ä¸å…¶ä»–ä¼˜æƒ å åŠ "],
  "createdAt": "2025-07-01T00:00:00Z"
}
```

#### åˆ›å»ºè¥é”€æ´»åŠ¨
```
POST /miniapp/api/v1/promotions
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "title": "æ˜¥å­£æ‹æ‘„ä¼˜æƒ ",
  "description": "æ˜¥å­£äººåƒæ‹æ‘„8æŠ˜ä¼˜æƒ ",
  "type": "DISCOUNT",
  "discountType": "PERCENTAGE",
  "discountValue": 20,
  "minAmount": 500,
  "maxDiscount": 200,
  "posterImage": "poster.jpg",
  "bannerImage": "banner.jpg",
  "startTime": "2025-07-01T00:00:00Z",
  "endTime": "2025-07-31T23:59:59Z",
  "usageLimit": 100,
  "userLimit": 1,
  "rules": ["ä»…é™æ–°ç”¨æˆ·", "ä¸å¯ä¸å…¶ä»–ä¼˜æƒ å åŠ "]
}
```

#### æ›´æ–°è¥é”€æ´»åŠ¨
```
PUT /miniapp/api/v1/promotions/{id}
```

#### åˆ é™¤è¥é”€æ´»åŠ¨
```
DELETE /miniapp/api/v1/promotions/{id}
```

#### å‚ä¸è¥é”€æ´»åŠ¨
```
POST /miniapp/api/v1/promotions/{id}/participate
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "success": true,
  "couponCode": "SPRING2025",
  "message": "æ­å–œæ‚¨è·å¾—ä¼˜æƒ åˆ¸"
}
```

#### è·å–æ´»åŠ¨ç»Ÿè®¡
```
GET /miniapp/api/v1/promotions/{id}/statistics
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "participantCount": 25,
  "viewCount": 1200,
  "shareCount": 45,
  "conversionRate": 2.08,
  "totalRevenue": 5000.00,
  "dailyStats": [
    {
      "date": "2025-07-27",
      "participants": 5,
      "views": 120,
      "shares": 8
    }
  ]
}
```

#### ç”Ÿæˆæ¨å¹¿æµ·æŠ¥
```
POST /miniapp/api/v1/promotions/{id}/poster
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "template": "template1",
  "customText": "é™æ—¶ä¼˜æƒ ",
  "qrCodeData": "promotion_123"
}
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "posterUrl": "https://oss.example.com/poster_123.jpg",
  "qrCodeUrl": "https://oss.example.com/qr_123.jpg"
}
```

### 5. æœåŠ¡å¥—é¤æ¨¡å—

#### è·å–å¥—é¤åˆ—è¡¨
```
GET /miniapp/api/v1/packages
```

#### è·å–å¥—é¤è¯¦æƒ…
```
GET /miniapp/api/v1/packages/{id}
```

#### åˆ›å»ºå¥—é¤
```
POST /miniapp/api/v1/packages
```

#### æ›´æ–°å¥—é¤
```
PUT /miniapp/api/v1/packages/{id}
```

#### åˆ é™¤å¥—é¤
```
DELETE /miniapp/api/v1/packages/{id}
```

### 6. é¢„çº¦ç®¡ç†æ¨¡å—

#### è·å–é¢„çº¦åˆ—è¡¨
```
GET /miniapp/api/v1/bookings
```

#### åˆ›å»ºé¢„çº¦
```
POST /miniapp/api/v1/bookings
```

#### è·å–é¢„çº¦è¯¦æƒ…
```
GET /miniapp/api/v1/bookings/{id}
```

#### æ›´æ–°é¢„çº¦
```
PUT /miniapp/api/v1/bookings/{id}
```

#### å–æ¶ˆé¢„çº¦
```
DELETE /miniapp/api/v1/bookings/{id}
```

#### ç¡®è®¤é¢„çº¦
```
PUT /miniapp/api/v1/bookings/{id}/confirm
```

#### æ‹’ç»é¢„çº¦
```
PUT /miniapp/api/v1/bookings/{id}/reject
```

### 7. è®¢å•ç®¡ç†æ¨¡å—

#### è·å–è®¢å•åˆ—è¡¨
```
GET /miniapp/api/v1/orders
```

#### åˆ›å»ºè®¢å•
```
POST /miniapp/api/v1/orders
```

#### è·å–è®¢å•è¯¦æƒ…
```
GET /miniapp/api/v1/orders/{id}
```

#### æ›´æ–°è®¢å•
```
PUT /miniapp/api/v1/orders/{id}
```

#### æ”¯ä»˜è®¢å•
```
POST /miniapp/api/v1/orders/{id}/pay
```

#### é€€æ¬¾è®¢å•
```
POST /miniapp/api/v1/orders/{id}/refund
```

#### è·å–å‘ç¥¨
```
GET /miniapp/api/v1/orders/{id}/invoice
```

### 8. è¯„ä»·ç®¡ç†æ¨¡å—

#### è·å–è¯„ä»·åˆ—è¡¨
```
GET /miniapp/api/v1/reviews
```

#### åˆ›å»ºè¯„ä»·
```
POST /miniapp/api/v1/reviews
```

#### è·å–è¯„ä»·è¯¦æƒ…
```
GET /miniapp/api/v1/reviews/{id}
```

#### æ›´æ–°è¯„ä»·
```
PUT /miniapp/api/v1/reviews/{id}
```

#### å›å¤è¯„ä»·
```
POST /miniapp/api/v1/reviews/{id}/reply
```

#### è·å–æ‘„å½±å¸ˆè¯„ä»·
```
GET /miniapp/api/v1/photographers/{id}/reviews
```

### 9. æ”¶è—ç®¡ç†æ¨¡å—

#### è·å–æ”¶è—åˆ—è¡¨
```
GET /miniapp/api/v1/favorites
```

#### æ·»åŠ æ”¶è—
```
POST /miniapp/api/v1/favorites
```

#### å–æ¶ˆæ”¶è—
```
DELETE /miniapp/api/v1/favorites/{id}
```

#### æ£€æŸ¥æ”¶è—çŠ¶æ€
```
GET /miniapp/api/v1/favorites/check
```

### 10. è¥é”€æ¨å¹¿æ¨¡å—

#### è·å–æ´»åŠ¨åˆ—è¡¨
```
GET /miniapp/api/v1/promotions
```

#### è·å–æ´»åŠ¨è¯¦æƒ…
```
GET /miniapp/api/v1/promotions/{id}
```

#### åˆ›å»ºæ´»åŠ¨
```
POST /miniapp/api/v1/promotions
```

#### æ›´æ–°æ´»åŠ¨
```
PUT /miniapp/api/v1/promotions/{id}
```

#### åˆ é™¤æ´»åŠ¨
```
DELETE /miniapp/api/v1/promotions/{id}
```

#### å‚ä¸æ´»åŠ¨
```
POST /miniapp/api/v1/promotions/{id}/join
```

### 11. æ–‡ä»¶ç®¡ç†æ¨¡å—

#### ä¸Šä¼ æ–‡ä»¶
```
POST /miniapp/api/v1/files/upload
```

#### è·å–æ–‡ä»¶ä¿¡æ¯
```
GET /miniapp/api/v1/files/{id}
```

#### åˆ é™¤æ–‡ä»¶
```
DELETE /miniapp/api/v1/files/{id}
```

#### æ‰¹é‡ä¸Šä¼ 
```
POST /miniapp/api/v1/files/batch-upload
```

### 12. æœç´¢æ¨¡å—

#### å…¨å±€æœç´¢
```
GET /miniapp/api/v1/search
```

#### æœç´¢æ‘„å½±å¸ˆ
```
GET /miniapp/api/v1/search/photographers
```

#### æœç´¢ä½œå“
```
GET /miniapp/api/v1/search/portfolios
```

### 13. æ¶ˆæ¯é€šçŸ¥æ¨¡å—

#### è·å–é€šçŸ¥åˆ—è¡¨
```
GET /miniapp/api/v1/notifications
```

#### æ ‡è®°å·²è¯»
```
PUT /miniapp/api/v1/notifications/{id}/read
```

#### æ‰¹é‡æ ‡è®°å·²è¯»
```
PUT /miniapp/api/v1/notifications/batch-read
```

### 14. æ”¯ä»˜æ¨¡å— ğŸ”„ **åæœŸå¼€å‘**

#### å¾®ä¿¡ç»Ÿä¸€ä¸‹å•
```
POST /miniapp/api/v1/payment/wxpay/unifiedorder
```

#### å¾®ä¿¡æ”¯ä»˜å›è°ƒ
```
POST /miniapp/api/v1/payment/wxpay/notify
```

#### æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€
```
GET /miniapp/api/v1/payment/orders/{id}/status
```

#### ç”³è¯·é€€æ¬¾
```
POST /miniapp/api/v1/payment/refund
```

## ğŸ–¥ï¸ ç®¡ç†åå°APIæ¥å£

### 1. ç®¡ç†å‘˜è®¤è¯æ¨¡å—

#### ç®¡ç†å‘˜ç™»å½•
```
POST /admin/api/v1/auth/login
```

#### ç®¡ç†å‘˜é€€å‡º
```
POST /admin/api/v1/auth/logout
```

#### åˆ·æ–°Token
```
POST /admin/api/v1/auth/refresh
```

### 2. ç”¨æˆ·ç®¡ç†æ¨¡å—

#### è·å–ç”¨æˆ·åˆ—è¡¨
```
GET /admin/api/v1/users
```

#### è·å–ç”¨æˆ·è¯¦æƒ…
```
GET /admin/api/v1/users/{id}
```

#### æ›´æ–°ç”¨æˆ·çŠ¶æ€
```
PUT /admin/api/v1/users/{id}/status
```

#### åˆ é™¤ç”¨æˆ·
```
DELETE /admin/api/v1/users/{id}
```

### 3. æ‘„å½±å¸ˆç®¡ç†æ¨¡å—

#### è·å–æ‘„å½±å¸ˆåˆ—è¡¨
```
GET /admin/api/v1/photographers
```

#### æ‘„å½±å¸ˆè®¤è¯å®¡æ ¸
```
POST /admin/api/v1/photographers/{id}/audit
```

#### è·å–è®¤è¯ç”³è¯·åˆ—è¡¨
```
GET /admin/api/v1/photographers/applications
```

### 4. å†…å®¹å®¡æ ¸æ¨¡å—

#### è·å–å¾…å®¡æ ¸å†…å®¹
```
GET /admin/api/v1/audit/pending
```

#### å®¡æ ¸ä½œå“
```
POST /admin/api/v1/audit/portfolios/{id}
```

#### å®¡æ ¸è¥é”€æ´»åŠ¨
```
POST /admin/api/v1/audit/promotions/{id}
```

#### è·å–å®¡æ ¸æ—¥å¿—
```
GET /admin/api/v1/audit/logs
```

### 5. æ•°æ®ç»Ÿè®¡æ¨¡å—

#### è·å–æ€»ä½“ç»Ÿè®¡
```
GET /admin/api/v1/statistics/overview
```

#### è·å–ç”¨æˆ·ç»Ÿè®¡
```
GET /admin/api/v1/statistics/users
```

#### è·å–è®¢å•ç»Ÿè®¡
```
GET /admin/api/v1/statistics/orders
```

#### è·å–æ”¶å…¥ç»Ÿè®¡
```
GET /admin/api/v1/statistics/revenue
```

#### å¯¼å‡ºç»Ÿè®¡æŠ¥è¡¨
```
GET /admin/api/v1/statistics/export
```

### 6. ç³»ç»Ÿé…ç½®æ¨¡å—

#### è·å–ç³»ç»Ÿé…ç½®
```
GET /admin/api/v1/config
```

#### æ›´æ–°ç³»ç»Ÿé…ç½®
```
PUT /admin/api/v1/config
```

#### è·å–é…ç½®å†å²
```
GET /admin/api/v1/config/history
```

### 7. æ“ä½œæ—¥å¿—æ¨¡å—

#### è·å–æ“ä½œæ—¥å¿—
```
GET /admin/api/v1/logs/operations
```

#### è·å–ç™»å½•æ—¥å¿—
```
GET /admin/api/v1/logs/logins
```

#### è·å–é”™è¯¯æ—¥å¿—
```
GET /admin/api/v1/logs/errors
```

## ğŸ“Š çŠ¶æ€ç è¯´æ˜

### æˆåŠŸçŠ¶æ€ç 
- **200**: è¯·æ±‚æˆåŠŸ
- **201**: åˆ›å»ºæˆåŠŸ
- **204**: åˆ é™¤æˆåŠŸ

### å®¢æˆ·ç«¯é”™è¯¯
- **400**: è¯·æ±‚å‚æ•°é”™è¯¯
- **401**: æœªè®¤è¯æˆ–Tokenè¿‡æœŸ
- **403**: æƒé™ä¸è¶³
- **404**: èµ„æºä¸å­˜åœ¨
- **409**: èµ„æºå†²çª
- **422**: å‚æ•°éªŒè¯å¤±è´¥

### æœåŠ¡ç«¯é”™è¯¯
- **500**: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
- **502**: ç½‘å…³é”™è¯¯
- **503**: æœåŠ¡ä¸å¯ç”¨

## ğŸ”§ æ¥å£è°ƒç”¨ç¤ºä¾‹

### è¯·æ±‚ç¤ºä¾‹
```bash
curl -X POST \
  https://api.shootsunrise.com/miniapp/api/v1/auth/wxLogin \
  -H 'Content-Type: application/json' \
  -d '{
    "code": "wx_auth_code_here"
  }'
```

### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "tokenType": "Bearer",
    "expiresIn": 604800,
    "userInfo": {
      "id": 1,
      "nickname": "å¼ ä¸‰",
      "avatar": "https://example.com/avatar.jpg",
      "currentRole": "CLIENT"
    }
  },
  "timestamp": 1642752000000,
  "traceId": "abc123"
}
```

## ğŸ”§ ç®¡ç†åå°APIæ¥å£

### 1. ç®¡ç†å‘˜è®¤è¯æ¨¡å—

#### ç®¡ç†å‘˜ç™»å½•
```
POST /admin/api/v1/auth/login
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "username": "admin",
  "password": "password123",
  "captcha": "1234",
  "captchaKey": "captcha_key_123"
}
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "accessToken": "admin_access_token",
  "refreshToken": "admin_refresh_token",
  "tokenType": "Bearer",
  "expiresIn": 7200,
  "adminInfo": {
    "id": 1,
    "username": "admin",
    "nickname": "ç³»ç»Ÿç®¡ç†å‘˜",
    "avatar": "admin_avatar.jpg",
    "roles": ["SUPER_ADMIN"],
    "permissions": ["user:manage", "content:audit"]
  }
}
```

#### è·å–éªŒè¯ç 
```
GET /admin/api/v1/auth/captcha
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "captchaKey": "captcha_key_123",
  "captchaImage": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
}
```

#### åˆ·æ–°Token
```
POST /admin/api/v1/auth/refresh
```

#### ç®¡ç†å‘˜ç™»å‡º
```
POST /admin/api/v1/auth/logout
```

### 2. ç”¨æˆ·ç®¡ç†æ¨¡å—

#### è·å–ç”¨æˆ·åˆ—è¡¨
```
GET /admin/api/v1/users
```
**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=20&keyword=å¼ ä¸‰&status=1&role=PHOTOGRAPHER&startDate=2025-01-01&endDate=2025-12-31
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "records": [
    {
      "id": 1,
      "openid": "wx_openid_123",
      "nickname": "å¼ ä¸‰",
      "avatar": "avatar.jpg",
      "phone": "13800138000",
      "currentRole": "PHOTOGRAPHER",
      "status": 1,
      "loginCount": 25,
      "lastLoginAt": "2025-07-27T10:00:00Z",
      "createdAt": "2025-01-01T00:00:00Z",
      "photographerInfo": {
        "certificationStatus": "APPROVED",
        "rating": 4.8,
        "totalWorks": 156
      }
    }
  ],
  "total": 1000,
  "pageNum": 1,
  "pageSize": 20
}
```

#### è·å–ç”¨æˆ·è¯¦æƒ…
```
GET /admin/api/v1/users/{id}
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "id": 1,
  "openid": "wx_openid_123",
  "nickname": "å¼ ä¸‰",
  "avatar": "avatar.jpg",
  "phone": "13800138000",
  "gender": 1,
  "city": "åŒ—äº¬",
  "province": "åŒ—äº¬",
  "currentRole": "PHOTOGRAPHER",
  "availableRoles": ["CLIENT", "PHOTOGRAPHER"],
  "status": 1,
  "loginCount": 25,
  "lastLoginAt": "2025-07-27T10:00:00Z",
  "createdAt": "2025-01-01T00:00:00Z",
  "photographerProfile": {
    "realName": "å¼ ä¸‰",
    "bio": "ä¸“ä¸šæ‘„å½±å¸ˆ",
    "specialties": ["äººåƒ", "é£æ™¯"],
    "experienceYears": 5,
    "certificationStatus": "APPROVED",
    "certificationTime": "2025-01-15T00:00:00Z",
    "rating": 4.8,
    "totalWorks": 156,
    "completedOrders": 89,
    "totalRevenue": 50000.00
  },
  "statistics": {
    "portfolioCount": 156,
    "likeCount": 3400,
    "collectCount": 890,
    "viewCount": 12000,
    "followerCount": 234
  }
}
```

#### æ›´æ–°ç”¨æˆ·çŠ¶æ€
```
PUT /admin/api/v1/users/{id}/status
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "status": 0,
  "reason": "è¿è§„æ“ä½œ"
}
```

#### é‡ç½®ç”¨æˆ·å¯†ç 
```
POST /admin/api/v1/users/{id}/resetPassword
```

#### ç”¨æˆ·ç»Ÿè®¡æ•°æ®
```
GET /admin/api/v1/users/statistics
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "totalUsers": 10000,
  "activeUsers": 8500,
  "newUsersToday": 50,
  "newUsersThisMonth": 1200,
  "photographerCount": 1500,
  "clientCount": 8500,
  "userGrowthTrend": [
    {
      "date": "2025-07-27",
      "newUsers": 50,
      "activeUsers": 8500
    }
  ]
}
```

### 3. æ‘„å½±å¸ˆè®¤è¯ç®¡ç†

#### è·å–è®¤è¯ç”³è¯·åˆ—è¡¨
```
GET /admin/api/v1/photographer/applications
```
**æŸ¥è¯¢å‚æ•°ï¼š**
```
pageNum=1&pageSize=20&status=PENDING&keyword=å¼ ä¸‰&startDate=2025-01-01
```
**å“åº”æ•°æ®ï¼š**
```json
{
  "records": [
    {
      "id": 1,
      "userId": 123,
      "userInfo": {
        "nickname": "å¼ ä¸‰",
        "avatar": "avatar.jpg",
        "phone": "13800138000"
      },
      "realName": "å¼ ä¸‰",
      "idCard": "åŠ å¯†èº«ä»½è¯å·",
      "bio": "ä¸“ä¸šæ‘„å½±å¸ˆï¼Œä»ä¸š5å¹´",
      "specialties": ["äººåƒ", "é£æ™¯"],
      "experienceYears": 5,
      "serviceAreas": ["åŒ—äº¬", "ä¸Šæµ·"],
      "contactWechat": "wechat123",
      "contactPhone": "13800138000",
      "portfolioImages": ["image1.jpg", "image2.jpg"],
      "certificationStatus": "PENDING",
      "submittedAt": "2025-07-27T10:00:00Z",
      "reviewedAt": null,
      "reviewedBy": null,
      "rejectionReason": null
    }
  ],
  "total": 50,
  "pageNum": 1,
  "pageSize": 20
}
```

#### å®¡æ ¸æ‘„å½±å¸ˆè®¤è¯
```
POST /admin/api/v1/photographer/applications/{id}/review
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "action": "APPROVE",
  "reason": "ææ–™é½å…¨ï¼Œç¬¦åˆè®¤è¯æ ‡å‡†"
}
```

#### æ‰¹é‡å®¡æ ¸è®¤è¯ç”³è¯·
```
POST /admin/api/v1/photographer/applications/batchReview
```
**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "applicationIds": [1, 2, 3],
  "action": "APPROVE",
  "reason": "æ‰¹é‡å®¡æ ¸é€šè¿‡"
}
```

## ğŸ“ æ¥å£å˜æ›´è®°å½•

### v1.0 (2025-07-27)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŒ…å«æ‰€æœ‰æ ¸å¿ƒä¸šåŠ¡æ¥å£
- æ”¯æŒå°ç¨‹åºå’Œç®¡ç†åå°

---

**æ–‡æ¡£çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ
**ä¸‹ä¸€æ­¥ï¼š** å¼€å§‹åç«¯APIå¼€å‘å®ç°
**è”ç³»äººï¼š** å¼€å‘å›¢é˜Ÿ
