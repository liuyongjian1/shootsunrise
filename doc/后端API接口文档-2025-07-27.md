# 个人摄影师微信小程序 - 后端API接口文档

**文档版本：** v1.0  
**创建日期：** 2025-07-27  
**作者：** 开发团队  

## 📋 文档概述

本文档详细描述了个人摄影师微信小程序后端API接口的设计规范、接口定义和使用说明。

## 🔌 API基础规范

### 基础信息
- **小程序API**: `https://api.shootsunrise.com/miniapp/api/v1`
- **管理后台API**: `https://api.shootsunrise.com/admin/api/v1`
- **认证方式**: JWT Token
- **请求格式**: JSON
- **响应格式**: 统一 ApiResponse 格式

### 统一响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": 1642752000000,
  "traceId": "abc123"
}
```

### 分页响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [],
    "total": 100,
    "pageNum": 1,
    "pageSize": 10,
    "totalPages": 10
  },
  "timestamp": 1642752000000,
  "traceId": "abc123"
}
```

### 错误响应格式
```json
{
  "code": 400,
  "message": "参数错误",
  "data": null,
  "timestamp": 1642752000000,
  "traceId": "abc123"
}
```

#### 角色切换
```
POST /miniapp/api/v1/auth/switchRole
```
**请求参数：**
```json
{
  "targetRole": "PHOTOGRAPHER"
}
```
**响应数据：**
```json
{
  "success": true,
  "currentRole": "PHOTOGRAPHER",
  "needCertification": true
}
```

#### 摄影师认证申请
```
POST /miniapp/api/v1/auth/photographerCertification
```
**请求参数：**
```json
{
  "realName": "张三",
  "idCard": "加密身份证号",
  "bio": "个人简介",
  "specialties": ["人像", "风景"],
  "experienceYears": 5,
  "serviceAreas": ["北京", "上海"],
  "contactWechat": "wechat123",
  "contactPhone": "13800138000",
  "portfolioImages": ["image1.jpg", "image2.jpg"]
}
```

#### 获取认证状态
```
GET /miniapp/api/v1/auth/certificationStatus
```
**响应数据：**
```json
{
  "status": "PENDING",
  "submittedAt": "2025-07-27T10:00:00Z",
  "reviewedAt": null,
  "rejectionReason": null
}
```

## 🔐 认证授权

### 认证流程
1. 客户端调用登录接口获取Token
2. 后续请求在Header中携带Token
3. 服务端验证Token有效性
4. Token过期自动刷新

### 请求头格式
```
Authorization: Bearer {access_token}
Content-Type: application/json
```

## 📱 小程序API接口

### 1. 用户认证模块

#### 微信登录
```
POST /miniapp/api/v1/auth/wxLogin
```
**请求参数：**
```json
{
  "code": "微信授权码"
}
```
**响应数据：**
```json
{
  "accessToken": "访问令牌",
  "refreshToken": "刷新令牌",
  "tokenType": "Bearer",
  "expiresIn": 604800,
  "userInfo": {
    "id": 1,
    "nickname": "用户昵称",
    "avatar": "头像URL",
    "currentRole": "CLIENT"
  }
}
```

#### 刷新Token
```
POST /miniapp/api/v1/auth/refresh
```

#### 角色切换
```
POST /miniapp/api/v1/auth/switchRole
```

#### 退出登录
```
POST /miniapp/api/v1/auth/logout
```

### 2. 用户管理模块

#### 获取用户信息
```
GET /miniapp/api/v1/users/profile
```
**响应数据：**
```json
{
  "id": 1,
  "openid": "wx_openid_123",
  "nickname": "用户昵称",
  "avatar": "https://avatar.url",
  "phone": "13800138000",
  "gender": 1,
  "city": "北京",
  "province": "北京",
  "currentRole": "CLIENT",
  "availableRoles": ["CLIENT", "PHOTOGRAPHER"],
  "status": 1,
  "lastLoginAt": "2025-07-27T10:00:00Z",
  "createdAt": "2025-01-01T00:00:00Z"
}
```

#### 更新用户信息
```
PUT /miniapp/api/v1/users/profile
```
**请求参数：**
```json
{
  "nickname": "新昵称",
  "avatar": "new_avatar.jpg",
  "phone": "13800138000",
  "gender": 1,
  "city": "上海",
  "province": "上海"
}
```

#### 获取用户统计
```
GET /miniapp/api/v1/users/statistics
```
**响应数据：**
```json
{
  "portfolioCount": 25,
  "likeCount": 340,
  "collectCount": 89,
  "viewCount": 1200,
  "followerCount": 56,
  "followingCount": 23
}
```

#### 获取用户收藏
```
GET /miniapp/api/v1/users/collections
```
**查询参数：**
```
pageNum=1&pageSize=10&type=portfolio
```

#### 获取用户点赞
```
GET /miniapp/api/v1/users/likes
```

#### 关注摄影师
```
POST /miniapp/api/v1/users/follow/{photographerId}
```

#### 取消关注
```
DELETE /miniapp/api/v1/users/follow/{photographerId}
```

#### 获取关注列表
```
GET /miniapp/api/v1/users/following
```

#### 获取粉丝列表
```
GET /miniapp/api/v1/users/followers
```

#### 申请摄影师认证
```
POST /miniapp/api/v1/users/photographer/apply
```
**请求参数：**
```json
{
  "realName": "张三",
  "idCard": "加密身份证号",
  "bio": "专业摄影师，从业5年",
  "specialties": ["人像", "风景"],
  "experienceYears": 5,
  "serviceAreas": ["北京", "上海"],
  "contactWechat": "wechat123",
  "contactPhone": "13800138000",
  "portfolioImages": ["image1.jpg", "image2.jpg"]
}
```

#### 获取摄影师资料
```
GET /miniapp/api/v1/users/photographer/profile
```

#### 更新摄影师资料
```
PUT /miniapp/api/v1/users/photographer/profile
```

### 3. 作品管理模块

#### 获取作品列表
```
GET /miniapp/api/v1/portfolios
```
**查询参数：**
```
pageNum=1&pageSize=10&category=人像&style=清新&photographerId=123&keyword=婚纱
```
**响应数据：**
```json
{
  "records": [
    {
      "id": 1,
      "title": "春日写真",
      "description": "清新自然的春日写真作品",
      "coverImage": "https://oss.example.com/cover1.jpg",
      "images": ["image1.jpg", "image2.jpg"],
      "category": "人像",
      "style": "清新",
      "tags": ["春天", "户外"],
      "photographerId": 123,
      "photographerName": "张摄影师",
      "photographerAvatar": "avatar.jpg",
      "likeCount": 88,
      "viewCount": 1200,
      "isLiked": false,
      "isCollected": false,
      "createdAt": "2025-07-27T10:00:00Z"
    }
  ],
  "total": 100,
  "pageNum": 1,
  "pageSize": 10
}
```

#### 获取作品详情
```
GET /miniapp/api/v1/portfolios/{id}
```
**响应数据：**
```json
{
  "id": 1,
  "title": "春日写真",
  "description": "详细的作品描述...",
  "coverImage": "https://oss.example.com/cover1.jpg",
  "images": [
    {
      "url": "https://oss.example.com/image1.jpg",
      "thumbnail": "https://oss.example.com/thumb1.jpg",
      "width": 1920,
      "height": 1080
    }
  ],
  "category": "人像",
  "style": "清新",
  "tags": ["春天", "户外"],
  "shootingLocation": "北京·朝阳公园",
  "shootingDate": "2025-07-20",
  "cameraInfo": "Canon EOS R5",
  "photographerId": 123,
  "photographerInfo": {
    "id": 123,
    "name": "张摄影师",
    "avatar": "avatar.jpg",
    "rating": 4.8,
    "totalWorks": 156
  },
  "likeCount": 88,
  "viewCount": 1200,
  "isLiked": false,
  "isCollected": false,
  "createdAt": "2025-07-27T10:00:00Z"
}
```

#### 创建作品
```
POST /miniapp/api/v1/portfolios
```
**请求参数：**
```json
{
  "title": "春日写真",
  "description": "清新自然的春日写真作品",
  "coverImage": "cover1.jpg",
  "images": ["image1.jpg", "image2.jpg", "image3.jpg"],
  "category": "人像",
  "style": "清新",
  "tags": ["春天", "户外"],
  "shootingLocation": "北京·朝阳公园",
  "shootingDate": "2025-07-20",
  "cameraInfo": "Canon EOS R5",
  "isPublic": true,
  "isFeatured": false
}
```

#### 更新作品
```
PUT /miniapp/api/v1/portfolios/{id}
```
**请求参数：** 同创建作品

#### 删除作品
```
DELETE /miniapp/api/v1/portfolios/{id}
```

#### 点赞作品
```
POST /miniapp/api/v1/portfolios/{id}/like
```
**响应数据：**
```json
{
  "isLiked": true,
  "likeCount": 89
}
```

#### 收藏作品
```
POST /miniapp/api/v1/portfolios/{id}/collect
```

#### 获取我的作品
```
GET /miniapp/api/v1/portfolios/my
```

#### 图片上传
```
POST /miniapp/api/v1/portfolios/upload
```
**请求参数：** FormData
- file: 图片文件
- type: 图片类型 (cover/content)

**响应数据：**
```json
{
  "url": "https://oss.example.com/image123.jpg",
  "thumbnail": "https://oss.example.com/thumb123.jpg",
  "filename": "image123.jpg",
  "size": 1024000
}
```

### 4. 摄影师管理模块

#### 获取摄影师列表
```
GET /miniapp/api/v1/photographers
```
**查询参数：**
```
pageNum=1&pageSize=10&city=北京&specialty=人像&sortBy=rating
```
**响应数据：**
```json
{
  "records": [
    {
      "id": 123,
      "name": "张摄影师",
      "avatar": "avatar.jpg",
      "bio": "专业人像摄影师",
      "specialties": ["人像", "婚纱"],
      "city": "北京",
      "rating": 4.8,
      "totalWorks": 156,
      "completedOrders": 89,
      "isOnline": true,
      "isFeatured": true
    }
  ],
  "total": 50,
  "pageNum": 1,
  "pageSize": 10
}
```

#### 获取摄影师详情
```
GET /miniapp/api/v1/photographers/{id}
```
**响应数据：**
```json
{
  "id": 123,
  "name": "张摄影师",
  "avatar": "avatar.jpg",
  "bio": "专业人像摄影师，从业5年...",
  "specialties": ["人像", "婚纱"],
  "experienceYears": 5,
  "serviceAreas": ["北京", "上海"],
  "contactWechat": "wechat123",
  "contactPhone": "13800138000",
  "rating": 4.8,
  "totalWorks": 156,
  "completedOrders": 89,
  "totalRevenue": 50000.00,
  "isOnline": true,
  "isFeatured": true,
  "certificationStatus": "APPROVED",
  "joinedAt": "2024-01-01T00:00:00Z"
}
```

#### 获取摄影师作品
```
GET /miniapp/api/v1/photographers/{id}/portfolios
```

#### 获取摄影师统计
```
GET /miniapp/api/v1/photographers/{id}/statistics
```
**响应数据：**
```json
{
  "totalWorks": 156,
  "totalViews": 12000,
  "totalLikes": 3400,
  "totalCollects": 890,
  "monthlyStats": [
    {
      "month": "2025-07",
      "works": 12,
      "views": 1200,
      "likes": 340
    }
  ]
}
```

### 5. 营销推广模块

#### 获取营销活动列表
```
GET /miniapp/api/v1/promotions
```
**查询参数：**
```
pageNum=1&pageSize=10&status=ACTIVE&photographerId=123
```
**响应数据：**
```json
{
  "records": [
    {
      "id": 1,
      "title": "春季拍摄优惠",
      "description": "春季人像拍摄8折优惠",
      "type": "DISCOUNT",
      "discountType": "PERCENTAGE",
      "discountValue": 20,
      "minAmount": 500,
      "posterImage": "poster.jpg",
      "startTime": "2025-07-01T00:00:00Z",
      "endTime": "2025-07-31T23:59:59Z",
      "status": "ACTIVE",
      "participantCount": 25,
      "photographerId": 123,
      "photographerName": "张摄影师"
    }
  ],
  "total": 10,
  "pageNum": 1,
  "pageSize": 10
}
```

#### 获取活动详情
```
GET /miniapp/api/v1/promotions/{id}
```
**响应数据：**
```json
{
  "id": 1,
  "title": "春季拍摄优惠",
  "description": "春季人像拍摄8折优惠，限时特惠...",
  "type": "DISCOUNT",
  "discountType": "PERCENTAGE",
  "discountValue": 20,
  "minAmount": 500,
  "maxDiscount": 200,
  "posterImage": "poster.jpg",
  "bannerImage": "banner.jpg",
  "startTime": "2025-07-01T00:00:00Z",
  "endTime": "2025-07-31T23:59:59Z",
  "status": "ACTIVE",
  "participantCount": 25,
  "usageLimit": 100,
  "userLimit": 1,
  "photographerId": 123,
  "photographerInfo": {
    "id": 123,
    "name": "张摄影师",
    "avatar": "avatar.jpg"
  },
  "rules": ["仅限新用户", "不可与其他优惠叠加"],
  "createdAt": "2025-07-01T00:00:00Z"
}
```

#### 创建营销活动
```
POST /miniapp/api/v1/promotions
```
**请求参数：**
```json
{
  "title": "春季拍摄优惠",
  "description": "春季人像拍摄8折优惠",
  "type": "DISCOUNT",
  "discountType": "PERCENTAGE",
  "discountValue": 20,
  "minAmount": 500,
  "maxDiscount": 200,
  "posterImage": "poster.jpg",
  "bannerImage": "banner.jpg",
  "startTime": "2025-07-01T00:00:00Z",
  "endTime": "2025-07-31T23:59:59Z",
  "usageLimit": 100,
  "userLimit": 1,
  "rules": ["仅限新用户", "不可与其他优惠叠加"]
}
```

#### 更新营销活动
```
PUT /miniapp/api/v1/promotions/{id}
```

#### 删除营销活动
```
DELETE /miniapp/api/v1/promotions/{id}
```

#### 参与营销活动
```
POST /miniapp/api/v1/promotions/{id}/participate
```
**响应数据：**
```json
{
  "success": true,
  "couponCode": "SPRING2025",
  "message": "恭喜您获得优惠券"
}
```

#### 获取活动统计
```
GET /miniapp/api/v1/promotions/{id}/statistics
```
**响应数据：**
```json
{
  "participantCount": 25,
  "viewCount": 1200,
  "shareCount": 45,
  "conversionRate": 2.08,
  "totalRevenue": 5000.00,
  "dailyStats": [
    {
      "date": "2025-07-27",
      "participants": 5,
      "views": 120,
      "shares": 8
    }
  ]
}
```

#### 生成推广海报
```
POST /miniapp/api/v1/promotions/{id}/poster
```
**请求参数：**
```json
{
  "template": "template1",
  "customText": "限时优惠",
  "qrCodeData": "promotion_123"
}
```
**响应数据：**
```json
{
  "posterUrl": "https://oss.example.com/poster_123.jpg",
  "qrCodeUrl": "https://oss.example.com/qr_123.jpg"
}
```

### 5. 服务套餐模块

#### 获取套餐列表
```
GET /miniapp/api/v1/packages
```

#### 获取套餐详情
```
GET /miniapp/api/v1/packages/{id}
```

#### 创建套餐
```
POST /miniapp/api/v1/packages
```

#### 更新套餐
```
PUT /miniapp/api/v1/packages/{id}
```

#### 删除套餐
```
DELETE /miniapp/api/v1/packages/{id}
```

### 6. 预约管理模块

#### 获取预约列表
```
GET /miniapp/api/v1/bookings
```

#### 创建预约
```
POST /miniapp/api/v1/bookings
```

#### 获取预约详情
```
GET /miniapp/api/v1/bookings/{id}
```

#### 更新预约
```
PUT /miniapp/api/v1/bookings/{id}
```

#### 取消预约
```
DELETE /miniapp/api/v1/bookings/{id}
```

#### 确认预约
```
PUT /miniapp/api/v1/bookings/{id}/confirm
```

#### 拒绝预约
```
PUT /miniapp/api/v1/bookings/{id}/reject
```

### 7. 订单管理模块

#### 获取订单列表
```
GET /miniapp/api/v1/orders
```

#### 创建订单
```
POST /miniapp/api/v1/orders
```

#### 获取订单详情
```
GET /miniapp/api/v1/orders/{id}
```

#### 更新订单
```
PUT /miniapp/api/v1/orders/{id}
```

#### 支付订单
```
POST /miniapp/api/v1/orders/{id}/pay
```

#### 退款订单
```
POST /miniapp/api/v1/orders/{id}/refund
```

#### 获取发票
```
GET /miniapp/api/v1/orders/{id}/invoice
```

### 8. 评价管理模块

#### 获取评价列表
```
GET /miniapp/api/v1/reviews
```

#### 创建评价
```
POST /miniapp/api/v1/reviews
```

#### 获取评价详情
```
GET /miniapp/api/v1/reviews/{id}
```

#### 更新评价
```
PUT /miniapp/api/v1/reviews/{id}
```

#### 回复评价
```
POST /miniapp/api/v1/reviews/{id}/reply
```

#### 获取摄影师评价
```
GET /miniapp/api/v1/photographers/{id}/reviews
```

### 9. 收藏管理模块

#### 获取收藏列表
```
GET /miniapp/api/v1/favorites
```

#### 添加收藏
```
POST /miniapp/api/v1/favorites
```

#### 取消收藏
```
DELETE /miniapp/api/v1/favorites/{id}
```

#### 检查收藏状态
```
GET /miniapp/api/v1/favorites/check
```

### 10. 营销推广模块

#### 获取活动列表
```
GET /miniapp/api/v1/promotions
```

#### 获取活动详情
```
GET /miniapp/api/v1/promotions/{id}
```

#### 创建活动
```
POST /miniapp/api/v1/promotions
```

#### 更新活动
```
PUT /miniapp/api/v1/promotions/{id}
```

#### 删除活动
```
DELETE /miniapp/api/v1/promotions/{id}
```

#### 参与活动
```
POST /miniapp/api/v1/promotions/{id}/join
```

### 11. 文件管理模块

#### 上传文件
```
POST /miniapp/api/v1/files/upload
```

#### 获取文件信息
```
GET /miniapp/api/v1/files/{id}
```

#### 删除文件
```
DELETE /miniapp/api/v1/files/{id}
```

#### 批量上传
```
POST /miniapp/api/v1/files/batch-upload
```

### 12. 搜索模块

#### 全局搜索
```
GET /miniapp/api/v1/search
```

#### 搜索摄影师
```
GET /miniapp/api/v1/search/photographers
```

#### 搜索作品
```
GET /miniapp/api/v1/search/portfolios
```

### 13. 消息通知模块

#### 获取通知列表
```
GET /miniapp/api/v1/notifications
```

#### 标记已读
```
PUT /miniapp/api/v1/notifications/{id}/read
```

#### 批量标记已读
```
PUT /miniapp/api/v1/notifications/batch-read
```

### 14. 支付模块 🔄 **后期开发**

#### 微信统一下单
```
POST /miniapp/api/v1/payment/wxpay/unifiedorder
```

#### 微信支付回调
```
POST /miniapp/api/v1/payment/wxpay/notify
```

#### 查询支付状态
```
GET /miniapp/api/v1/payment/orders/{id}/status
```

#### 申请退款
```
POST /miniapp/api/v1/payment/refund
```

## 🖥️ 管理后台API接口

### 1. 管理员认证模块

#### 管理员登录
```
POST /admin/api/v1/auth/login
```

#### 管理员退出
```
POST /admin/api/v1/auth/logout
```

#### 刷新Token
```
POST /admin/api/v1/auth/refresh
```

### 2. 用户管理模块

#### 获取用户列表
```
GET /admin/api/v1/users
```

#### 获取用户详情
```
GET /admin/api/v1/users/{id}
```

#### 更新用户状态
```
PUT /admin/api/v1/users/{id}/status
```

#### 删除用户
```
DELETE /admin/api/v1/users/{id}
```

### 3. 摄影师管理模块

#### 获取摄影师列表
```
GET /admin/api/v1/photographers
```

#### 摄影师认证审核
```
POST /admin/api/v1/photographers/{id}/audit
```

#### 获取认证申请列表
```
GET /admin/api/v1/photographers/applications
```

### 4. 内容审核模块

#### 获取待审核内容
```
GET /admin/api/v1/audit/pending
```

#### 审核作品
```
POST /admin/api/v1/audit/portfolios/{id}
```

#### 审核营销活动
```
POST /admin/api/v1/audit/promotions/{id}
```

#### 获取审核日志
```
GET /admin/api/v1/audit/logs
```

### 5. 数据统计模块

#### 获取总体统计
```
GET /admin/api/v1/statistics/overview
```

#### 获取用户统计
```
GET /admin/api/v1/statistics/users
```

#### 获取订单统计
```
GET /admin/api/v1/statistics/orders
```

#### 获取收入统计
```
GET /admin/api/v1/statistics/revenue
```

#### 导出统计报表
```
GET /admin/api/v1/statistics/export
```

### 6. 系统配置模块

#### 获取系统配置
```
GET /admin/api/v1/config
```

#### 更新系统配置
```
PUT /admin/api/v1/config
```

#### 获取配置历史
```
GET /admin/api/v1/config/history
```

### 7. 操作日志模块

#### 获取操作日志
```
GET /admin/api/v1/logs/operations
```

#### 获取登录日志
```
GET /admin/api/v1/logs/logins
```

#### 获取错误日志
```
GET /admin/api/v1/logs/errors
```

## 📊 状态码说明

### 成功状态码
- **200**: 请求成功
- **201**: 创建成功
- **204**: 删除成功

### 客户端错误
- **400**: 请求参数错误
- **401**: 未认证或Token过期
- **403**: 权限不足
- **404**: 资源不存在
- **409**: 资源冲突
- **422**: 参数验证失败

### 服务端错误
- **500**: 服务器内部错误
- **502**: 网关错误
- **503**: 服务不可用

## 🔧 接口调用示例

### 请求示例
```bash
curl -X POST \
  https://api.shootsunrise.com/miniapp/api/v1/auth/wxLogin \
  -H 'Content-Type: application/json' \
  -d '{
    "code": "wx_auth_code_here"
  }'
```

### 响应示例
```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "tokenType": "Bearer",
    "expiresIn": 604800,
    "userInfo": {
      "id": 1,
      "nickname": "张三",
      "avatar": "https://example.com/avatar.jpg",
      "currentRole": "CLIENT"
    }
  },
  "timestamp": 1642752000000,
  "traceId": "abc123"
}
```

## 🔧 管理后台API接口

### 1. 管理员认证模块

#### 管理员登录
```
POST /admin/api/v1/auth/login
```
**请求参数：**
```json
{
  "username": "admin",
  "password": "password123",
  "captcha": "1234",
  "captchaKey": "captcha_key_123"
}
```
**响应数据：**
```json
{
  "accessToken": "admin_access_token",
  "refreshToken": "admin_refresh_token",
  "tokenType": "Bearer",
  "expiresIn": 7200,
  "adminInfo": {
    "id": 1,
    "username": "admin",
    "nickname": "系统管理员",
    "avatar": "admin_avatar.jpg",
    "roles": ["SUPER_ADMIN"],
    "permissions": ["user:manage", "content:audit"]
  }
}
```

#### 获取验证码
```
GET /admin/api/v1/auth/captcha
```
**响应数据：**
```json
{
  "captchaKey": "captcha_key_123",
  "captchaImage": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
}
```

#### 刷新Token
```
POST /admin/api/v1/auth/refresh
```

#### 管理员登出
```
POST /admin/api/v1/auth/logout
```

### 2. 用户管理模块

#### 获取用户列表
```
GET /admin/api/v1/users
```
**查询参数：**
```
pageNum=1&pageSize=20&keyword=张三&status=1&role=PHOTOGRAPHER&startDate=2025-01-01&endDate=2025-12-31
```
**响应数据：**
```json
{
  "records": [
    {
      "id": 1,
      "openid": "wx_openid_123",
      "nickname": "张三",
      "avatar": "avatar.jpg",
      "phone": "13800138000",
      "currentRole": "PHOTOGRAPHER",
      "status": 1,
      "loginCount": 25,
      "lastLoginAt": "2025-07-27T10:00:00Z",
      "createdAt": "2025-01-01T00:00:00Z",
      "photographerInfo": {
        "certificationStatus": "APPROVED",
        "rating": 4.8,
        "totalWorks": 156
      }
    }
  ],
  "total": 1000,
  "pageNum": 1,
  "pageSize": 20
}
```

#### 获取用户详情
```
GET /admin/api/v1/users/{id}
```
**响应数据：**
```json
{
  "id": 1,
  "openid": "wx_openid_123",
  "nickname": "张三",
  "avatar": "avatar.jpg",
  "phone": "13800138000",
  "gender": 1,
  "city": "北京",
  "province": "北京",
  "currentRole": "PHOTOGRAPHER",
  "availableRoles": ["CLIENT", "PHOTOGRAPHER"],
  "status": 1,
  "loginCount": 25,
  "lastLoginAt": "2025-07-27T10:00:00Z",
  "createdAt": "2025-01-01T00:00:00Z",
  "photographerProfile": {
    "realName": "张三",
    "bio": "专业摄影师",
    "specialties": ["人像", "风景"],
    "experienceYears": 5,
    "certificationStatus": "APPROVED",
    "certificationTime": "2025-01-15T00:00:00Z",
    "rating": 4.8,
    "totalWorks": 156,
    "completedOrders": 89,
    "totalRevenue": 50000.00
  },
  "statistics": {
    "portfolioCount": 156,
    "likeCount": 3400,
    "collectCount": 890,
    "viewCount": 12000,
    "followerCount": 234
  }
}
```

#### 更新用户状态
```
PUT /admin/api/v1/users/{id}/status
```
**请求参数：**
```json
{
  "status": 0,
  "reason": "违规操作"
}
```

#### 重置用户密码
```
POST /admin/api/v1/users/{id}/resetPassword
```

#### 用户统计数据
```
GET /admin/api/v1/users/statistics
```
**响应数据：**
```json
{
  "totalUsers": 10000,
  "activeUsers": 8500,
  "newUsersToday": 50,
  "newUsersThisMonth": 1200,
  "photographerCount": 1500,
  "clientCount": 8500,
  "userGrowthTrend": [
    {
      "date": "2025-07-27",
      "newUsers": 50,
      "activeUsers": 8500
    }
  ]
}
```

### 3. 摄影师认证管理

#### 获取认证申请列表
```
GET /admin/api/v1/photographer/applications
```
**查询参数：**
```
pageNum=1&pageSize=20&status=PENDING&keyword=张三&startDate=2025-01-01
```
**响应数据：**
```json
{
  "records": [
    {
      "id": 1,
      "userId": 123,
      "userInfo": {
        "nickname": "张三",
        "avatar": "avatar.jpg",
        "phone": "13800138000"
      },
      "realName": "张三",
      "idCard": "加密身份证号",
      "bio": "专业摄影师，从业5年",
      "specialties": ["人像", "风景"],
      "experienceYears": 5,
      "serviceAreas": ["北京", "上海"],
      "contactWechat": "wechat123",
      "contactPhone": "13800138000",
      "portfolioImages": ["image1.jpg", "image2.jpg"],
      "certificationStatus": "PENDING",
      "submittedAt": "2025-07-27T10:00:00Z",
      "reviewedAt": null,
      "reviewedBy": null,
      "rejectionReason": null
    }
  ],
  "total": 50,
  "pageNum": 1,
  "pageSize": 20
}
```

#### 审核摄影师认证
```
POST /admin/api/v1/photographer/applications/{id}/review
```
**请求参数：**
```json
{
  "action": "APPROVE",
  "reason": "材料齐全，符合认证标准"
}
```

#### 批量审核认证申请
```
POST /admin/api/v1/photographer/applications/batchReview
```
**请求参数：**
```json
{
  "applicationIds": [1, 2, 3],
  "action": "APPROVE",
  "reason": "批量审核通过"
}
```

## 📝 接口变更记录

### v1.0 (2025-07-27)
- 初始版本发布
- 包含所有核心业务接口
- 支持小程序和管理后台

---

**文档状态：** ✅ 已完成
**下一步：** 开始后端API开发实现
**联系人：** 开发团队
