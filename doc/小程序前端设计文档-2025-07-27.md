# 个人摄影师微信小程序 - 前端设计文档

**文档版本：** v1.0
**创建日期：** 2025-07-27
**作者：** 开发团队

## 📋 文档概述

本文档详细描述了个人摄影师微信小程序前端的设计方案，包括页面结构、组件设计、状态管理、交互流程等技术实现细节。

## 🎯 设计原则

**模块化设计：**
- ✅ 组件化开发，提高代码复用性
- ✅ 工具类封装，统一处理逻辑
- ✅ 状态管理，集中数据管理
- ✅ 样式规范，保持视觉一致性

**通用性原则：**
- � 提供通用的页面模板
- 🔧 封装常用的业务组件
- � 统一的API调用方式
- � 标准化的错误处理

## 🏗️ 技术架构

### 技术栈选型
- **框架**: 微信小程序原生框架
- **UI组件库**: Vant Weapp 2.x
- **状态管理**: 小程序原生 globalData + 本地存储
- **网络请求**: 封装wx.request
- **图片处理**: 小程序原生API + 第三方压缩库
- **工具库**: 小程序原生API + 自定义工具函数

### 项目结构
```
miniprogram/
├── app.js                          # 小程序入口文件
├── app.json                        # 全局配置
├── app.wxss                        # 全局样式
├── sitemap.json                    # 搜索配置
├── project.config.json             # 项目配置
├── pages/                          # 页面目录
│   ├── index/                      # 首页模板
│   │   ├── index.js
│   │   ├── index.json
│   │   ├── index.wxml
│   │   └── index.wxss
│   ├── auth/                       # 认证页面模板
│   │   ├── login/                  # 登录页模板
│   │   └── register/               # 注册页模板
│   ├── list/                       # 列表页模板
│   │   ├── list.js
│   │   ├── list.json
│   │   ├── list.wxml
│   │   └── list.wxss
│   ├── detail/                     # 详情页模板
│   │   ├── detail.js
│   │   ├── detail.json
│   │   ├── detail.wxml
│   │   └── detail.wxss
│   ├── form/                       # 表单页模板
│   │   ├── form.js
│   │   ├── form.json
│   │   ├── form.wxml
│   │   └── form.wxss
│   └── common/                     # 通用页面
│       ├── profile/                # 个人中心模板
│       ├── search/                 # 搜索页模板
│       └── settings/               # 设置页模板
├── components/                     # 组件目录
│   ├── common/                     # 通用组件
│   │   ├── navbar/                 # 导航栏组件
│   │   ├── tabbar/                 # 底部导航组件
│   │   ├── loading/                # 加载状态组件
│   │   ├── empty/                  # 空状态组件
│   │   ├── image-viewer/           # 图片查看器
│   │   ├── search-bar/             # 搜索栏组件
│   │   └── pull-refresh/           # 下拉刷新组件
│   ├── form/                       # 表单组件
│   │   ├── form-item/              # 表单项组件
│   │   ├── image-upload/           # 图片上传组件
│   │   ├── date-picker/            # 日期选择器
│   │   └── area-picker/            # 地区选择器
│   ├── list/                       # 列表组件
│   │   ├── list-item/              # 列表项组件
│   │   ├── card/                   # 卡片组件
│   │   └── grid/                   # 网格组件
│   └── business/                   # 业务组件
│       ├── user-avatar/            # 用户头像组件
│       ├── rating-display/         # 评分显示组件
│       └── countdown/              # 倒计时组件
├── utils/                          # 工具类
│   ├── request.js                  # 网络请求封装
│   ├── auth.js                     # 认证工具
│   ├── storage.js                  # 存储工具
│   ├── upload.js                   # 文件上传工具
│   ├── image.js                    # 图片处理工具
│   ├── validator.js                # 表单验证工具
│   ├── constants.js                # 常量定义
│   └── api.js                      # API接口定义
├── store/                          # 数据管理
│   ├── index.js                    # 全局数据管理入口
│   ├── user.js                     # 用户数据管理
│   ├── app.js                      # 应用全局数据
│   └── cache.js                    # 缓存数据管理
└── styles/                         # 样式文件
    ├── variables.wxss              # 变量定义
    ├── mixins.wxss                 # 混入样式
    └── common.wxss                 # 通用样式
```

## 🎨 UI设计规范

### 设计系统

#### 色彩规范
```css
/* 主色调 */
--primary-color: #1890ff;          /* 主色 */
--primary-light: #40a9ff;          /* 主色-浅 */
--primary-dark: #096dd9;           /* 主色-深 */

/* 辅助色 */
--success-color: #52c41a;          /* 成功色 */
--warning-color: #faad14;          /* 警告色 */
--error-color: #ff4d4f;            /* 错误色 */
--info-color: #1890ff;             /* 信息色 */

/* 中性色 */
--text-primary: #262626;           /* 主要文本 */
--text-secondary: #595959;         /* 次要文本 */
--text-disabled: #bfbfbf;          /* 禁用文本 */
--border-color: #d9d9d9;           /* 边框色 */
--background-color: #f5f5f5;       /* 背景色 */
--white: #ffffff;                  /* 白色 */

/* 渐变色 */
--gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
--gradient-warm: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
```

#### 字体规范
```css
/* 字体大小 */
--font-size-xs: 20rpx;             /* 极小 */
--font-size-sm: 24rpx;             /* 小 */
--font-size-base: 28rpx;           /* 基础 */
--font-size-lg: 32rpx;             /* 大 */
--font-size-xl: 36rpx;             /* 极大 */
--font-size-xxl: 40rpx;            /* 超大 */

/* 字体粗细 */
--font-weight-light: 300;
--font-weight-normal: 400;
--font-weight-medium: 500;
--font-weight-bold: 600;

/* 行高 */
--line-height-sm: 1.2;
--line-height-base: 1.5;
--line-height-lg: 1.8;
```

#### 间距规范
```css
/* 间距系统 */
--spacing-xs: 8rpx;                /* 极小间距 */
--spacing-sm: 16rpx;               /* 小间距 */
--spacing-base: 24rpx;             /* 基础间距 */
--spacing-lg: 32rpx;               /* 大间距 */
--spacing-xl: 48rpx;               /* 极大间距 */
--spacing-xxl: 64rpx;              /* 超大间距 */

/* 圆角 */
--border-radius-sm: 4rpx;
--border-radius-base: 8rpx;
--border-radius-lg: 12rpx;
--border-radius-xl: 16rpx;
```

### 组件设计规范

#### 按钮组件
```css
/* 主要按钮 */
.btn-primary {
  background: var(--primary-color);
  color: var(--white);
  border: none;
  border-radius: var(--border-radius-base);
  padding: var(--spacing-sm) var(--spacing-lg);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
}

/* 次要按钮 */
.btn-secondary {
  background: var(--white);
  color: var(--primary-color);
  border: 2rpx solid var(--primary-color);
  border-radius: var(--border-radius-base);
  padding: var(--spacing-sm) var(--spacing-lg);
}

/* 危险按钮 */
.btn-danger {
  background: var(--error-color);
  color: var(--white);
  border: none;
  border-radius: var(--border-radius-base);
  padding: var(--spacing-sm) var(--spacing-lg);
}
```

#### 卡片组件
```css
.card {
  background: var(--white);
  border-radius: var(--border-radius-lg);
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-base);
}

.card-header {
  border-bottom: 2rpx solid var(--border-color);
  padding-bottom: var(--spacing-base);
  margin-bottom: var(--spacing-base);
}

.card-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
}
```

## 🗄️ 数据管理设计

### 小程序原生数据管理方案

#### 全局数据管理 (app.js)
```javascript
// app.js
App({
  globalData: {
    // 用户信息
    userInfo: null,
    currentRole: 'CLIENT',
    isLoggedIn: false,

    // 应用状态
    systemInfo: null,
    networkType: 'unknown',

    // 业务数据缓存
    portfolioCategories: [],
    hotPhotographers: []
  },

  onLaunch() {
    this.initAppData()
  },

  /**
   * 初始化应用数据
   */
  initAppData() {
    wx.getSystemInfo({
      success: (res) => {
        this.globalData.systemInfo = res
      }
    })

    this.restoreUserSession()
  },

  /**
   * 恢复用户会话
   */
  restoreUserSession() {
    const token = wx.getStorageSync('access_token')
    const userInfo = wx.getStorageSync('user_info')

    if (token && userInfo) {
      this.globalData.isLoggedIn = true
      this.globalData.userInfo = JSON.parse(userInfo)
    }
  },

  /**
   * 更新用户信息
   */
  updateUserInfo(userInfo) {
    this.globalData.userInfo = userInfo
    wx.setStorageSync('user_info', JSON.stringify(userInfo))
  }
})
```

#### 数据管理工具 (store/index.js)
```javascript
// store/index.js
class DataManager {
  constructor() {
    this.app = getApp()
  }

  getGlobalData(key) {
    return key ? this.app.globalData[key] : this.app.globalData
  }

  setGlobalData(key, value) {
    this.app.globalData[key] = value
  }

  getStorageData(key) {
    try {
      const data = wx.getStorageSync(key)
      return data ? JSON.parse(data) : null
    } catch (error) {
      console.error('获取本地存储失败:', error)
      return null
    }
  }

  setStorageData(key, value) {
    try {
      wx.setStorageSync(key, JSON.stringify(value))
      return true
    } catch (error) {
      console.error('设置本地存储失败:', error)
      return false
    }
  }
}

export default new DataManager()
```

#### 页面中使用数据管理
```javascript
// pages/index/index.js
import DataManager from '../../store/index.js'

Page({
  data: {
    userInfo: null,
    portfolios: []
  },

  onLoad() {
    // 获取用户信息
    const userInfo = DataManager.getGlobalData('userInfo')
    this.setData({ userInfo })

    // 获取缓存的作品列表
    const cachedPortfolios = DataManager.getStorageData('portfolios_cache')
    if (cachedPortfolios) {
      this.setData({ portfolios: cachedPortfolios })
    }
  },

  onUserInfoUpdate(newUserInfo) {
    // 更新全局用户信息
    DataManager.setGlobalData('userInfo', newUserInfo)
    this.setData({ userInfo: newUserInfo })
  }
})
```
## � 工具类设计

### 网络请求工具 (utils/request.js)

#### 请求封装
```javascript
// utils/request.js
import { getToken, removeToken } from './auth.js'
import { API_CONFIG } from './api.js'

/**
 * 网络请求封装
 * 支持自动Token处理、错误处理、请求拦截等
 */
class Request {
  constructor() {
    this.baseURL = API_CONFIG.BASE_URL
    this.timeout = API_CONFIG.TIMEOUT
  }

  /**
   * 发起请求
   * @param {Object} options 请求配置
   */
  request(options) {
    return new Promise((resolve, reject) => {
      // 1. 处理请求URL
      const url = this.buildUrl(options.url)

      // 2. 处理请求头
      const header = this.buildHeaders(options.header)

      // 3. 处理请求参数
      const data = this.buildData(options.data, options.method)

      // 4. 显示加载提示
      if (options.loading !== false) {
        wx.showLoading({ title: '加载中...', mask: true })
      }

      // 5. 发起请求
      wx.request({
        url,
        method: options.method || 'GET',
        data,
        header,
        timeout: this.timeout,
        success: (res) => {
          this.handleSuccess(res, resolve, reject)
        },
        fail: (error) => {
          this.handleError(error, reject)
        },
        complete: () => {
          if (options.loading !== false) {
            wx.hideLoading()
          }
        }
      })
    })
  }

  /**
   * 构建完整URL
   */
  buildUrl(url) {
    if (url.startsWith('http')) {
      return url
    }
    return `${this.baseURL}${url}`
  }

  /**
   * 构建请求头
   */
  buildHeaders(customHeaders = {}) {
    const headers = {
      'Content-Type': 'application/json',
      ...customHeaders
    }

    // 添加认证Token
    const token = getToken()
    if (token) {
      headers['Authorization'] = `Bearer ${token}`
    }

    return headers
  }

  /**
   * 处理请求数据
   */
  buildData(data, method) {
    if (!data) return {}

    // GET请求参数处理
    if (method === 'GET') {
      return data
    }

    // POST/PUT请求数据处理
    return data
  }

  /**
   * 处理成功响应
   */
  handleSuccess(res, resolve, reject) {
    const { statusCode, data } = res

    // HTTP状态码检查
    if (statusCode !== 200) {
      this.handleHttpError(statusCode, reject)
      return
    }

    // 业务状态码检查
    if (data.code === 200) {
      resolve(data)
    } else {
      this.handleBusinessError(data, reject)
    }
  }

  /**
   * 处理HTTP错误
   */
  handleHttpError(statusCode, reject) {
    let message = '网络错误'

    switch (statusCode) {
      case 401:
        message = '登录已过期，请重新登录'
        this.handleTokenExpired()
        break
      case 403:
        message = '没有权限访问'
        break
      case 404:
        message = '请求的资源不存在'
        break
      case 500:
        message = '服务器内部错误'
        break
      default:
        message = `网络错误 (${statusCode})`
    }

    wx.showToast({ title: message, icon: 'error' })
    reject(new Error(message))
  }

  /**
   * 处理业务错误
   */
  handleBusinessError(data, reject) {
    const message = data.message || '请求失败'

    // 特殊错误码处理
    if (data.code === 401) {
      this.handleTokenExpired()
    }

    wx.showToast({ title: message, icon: 'error' })
    reject(new Error(message))
  }

  /**
   * 处理Token过期
   */
  handleTokenExpired() {
    removeToken()

    // 跳转到登录页
    wx.reLaunch({
      url: '/pages/auth/login/login'
    })
  }

  /**
   * 处理网络错误
   */
  handleError(error, reject) {
    console.error('网络请求失败:', error)

    let message = '网络连接失败'
    if (error.errMsg) {
      if (error.errMsg.includes('timeout')) {
        message = '请求超时，请检查网络'
      } else if (error.errMsg.includes('fail')) {
        message = '网络连接失败，请检查网络'
      }
    }

    wx.showToast({ title: message, icon: 'error' })
    reject(new Error(message))
  }

  // 便捷方法
  get(url, data, options = {}) {
    return this.request({ url, method: 'GET', data, ...options })
  }

  post(url, data, options = {}) {
    return this.request({ url, method: 'POST', data, ...options })
  }

  put(url, data, options = {}) {
    return this.request({ url, method: 'PUT', data, ...options })
  }

  delete(url, data, options = {}) {
    return this.request({ url, method: 'DELETE', data, ...options })
  }
}

// 创建实例
const request = new Request()

export default request
```

### 认证工具 (utils/auth.js)

#### Token管理
```javascript
// utils/auth.js
const TOKEN_KEY = 'access_token'
const REFRESH_TOKEN_KEY = 'refresh_token'
const USER_INFO_KEY = 'user_info'

/**
 * 获取访问令牌
 */
export const getToken = () => {
  return wx.getStorageSync(TOKEN_KEY)
}

/**
 * 设置访问令牌
 */
export const setToken = (token) => {
  wx.setStorageSync(TOKEN_KEY, token)
}

/**
 * 移除访问令牌
 */
export const removeToken = () => {
  wx.removeStorageSync(TOKEN_KEY)
  wx.removeStorageSync(REFRESH_TOKEN_KEY)
  wx.removeStorageSync(USER_INFO_KEY)
}

/**
 * 获取刷新令牌
 */
export const getRefreshToken = () => {
  return wx.getStorageSync(REFRESH_TOKEN_KEY)
}

/**
 * 设置刷新令牌
 */
export const setRefreshToken = (refreshToken) => {
  wx.setStorageSync(REFRESH_TOKEN_KEY, refreshToken)
}

/**
 * 检查是否已登录
 */
export const isLoggedIn = () => {
  return !!getToken()
}

/**
 * 获取用户信息
 */
export const getUserInfo = () => {
  const userInfo = wx.getStorageSync(USER_INFO_KEY)
  return userInfo ? JSON.parse(userInfo) : null
}

/**
 * 设置用户信息
 */
export const setUserInfo = (userInfo) => {
  wx.setStorageSync(USER_INFO_KEY, JSON.stringify(userInfo))
}

/**
 * 清除用户信息
 */
export const clearUserInfo = () => {
  wx.removeStorageSync(USER_INFO_KEY)
}
```

## �📱 页面模板设计

### 通用页面模板

#### 列表页模板 (pages/list/list)
```html
<!-- list.wxml -->
<view class="container">
  <!-- 导航栏 -->
  <navbar title="{{ pageTitle }}" />

  <!-- 搜索栏（可选） -->
  <search-bar wx:if="{{ showSearch }}"
              placeholder="{{ searchPlaceholder }}"
              bind:search="onSearch" />

  <!-- 筛选栏（可选） -->
  <view wx:if="{{ showFilter }}" class="filter-bar">
    <van-dropdown-menu>
      <van-dropdown-item wx:for="{{ filters }}" wx:key="key"
                         value="{{ item.value }}"
                         options="{{ item.options }}"
                         bind:change="onFilterChange" />
    </van-dropdown-menu>
  </view>

  <!-- 列表内容 -->
  <view class="list-content">
    <!-- 加载状态 -->
    <loading wx:if="{{ loading }}" />

    <!-- 空状态 -->
    <empty wx:elif="{{ !loading && list.length === 0 }}"
           text="{{ emptyText }}" />

    <!-- 列表项 -->
    <view wx:else class="list-wrapper">
      <list-item wx:for="{{ list }}" wx:key="id"
                 data="{{ item }}"
                 template="{{ itemTemplate }}"
                 bind:tap="onItemTap" />
    </view>
  </view>

  <!-- 下拉刷新 -->
  <pull-refresh bind:refresh="onRefresh" />

  <!-- 上拉加载 -->
  <view wx:if="{{ hasMore }}" class="load-more" bind:tap="loadMore">
    <text>{{ loadMoreText }}</text>
  </view>
</view>
```

#### 详情页模板 (pages/detail/detail)
```html
<!-- detail.wxml -->
<view class="container">
  <!-- 导航栏 -->
  <navbar title="{{ pageTitle }}" />

  <!-- 加载状态 -->
  <loading wx:if="{{ loading }}" />

  <!-- 详情内容 -->
  <view wx:else class="detail-content">
    <!-- 头部信息 -->
    <view class="detail-header">
      <image wx:if="{{ detail.image }}"
             src="{{ detail.image }}"
             class="detail-image" />
      <view class="detail-info">
        <text class="detail-title">{{ detail.title }}</text>
        <text class="detail-subtitle">{{ detail.subtitle }}</text>
      </view>
    </view>

    <!-- 详情主体 -->
    <view class="detail-body">
      <text class="detail-description">{{ detail.description }}</text>
    </view>

    <!-- 操作按钮 -->
    <view class="detail-actions">
      <van-button wx:for="{{ actions }}" wx:key="key"
                  type="{{ item.type }}"
                  bind:click="onActionTap"
                  data-action="{{ item.key }}">
        {{ item.text }}
      </van-button>
    </view>
  </view>
</view>
```

#### 表单页模板 (pages/form/form)
```html
<!-- form.wxml -->
<view class="container">
  <!-- 导航栏 -->
  <navbar title="{{ pageTitle }}" />

  <!-- 表单内容 -->
  <form bind:submit="onSubmit" class="form-content">
    <view class="form-body">
      <!-- 动态表单项 -->
      <form-item wx:for="{{ formFields }}" wx:key="key"
                 field="{{ item }}"
                 value="{{ formData[item.key] }}"
                 bind:change="onFieldChange" />
    </view>

    <!-- 提交按钮 -->
    <view class="form-footer">
      <van-button type="primary"
                  form-type="submit"
                  loading="{{ submitting }}"
                  disabled="{{ !canSubmit }}">
        {{ submitText }}
      </van-button>
    </view>
  </form>
</view>
```

### 通用页面逻辑

#### 列表页逻辑模板
```javascript
// pages/list/list.js
const app = getApp()

Page({
  data: {
    // 页面配置
    pageTitle: '列表页',
    showSearch: true,
    showFilter: false,
    searchPlaceholder: '请输入搜索关键词',
    emptyText: '暂无数据',

    // 列表数据
    list: [],
    loading: false,
    hasMore: true,
    pageNum: 1,
    pageSize: 20,

    // 搜索和筛选
    searchKeyword: '',
    filters: {},

    // 列表项配置
    itemTemplate: 'default'
  },

  onLoad(options) {
    this.initPage(options)
  },

  onShow() {
    this.refreshData()
  },

  /**
   * 初始化页面
   */
  initPage(options) {
    // 解析页面参数
    this.parseOptions(options)

    // 加载初始数据
    this.loadData()
  },

  /**
   * 解析页面参数
   */
  parseOptions(options) {
    // 根据传入参数配置页面
    if (options.title) {
      this.setData({ pageTitle: options.title })
    }
  },

  /**
   * 加载数据
   */
  async loadData(refresh = false) {
    if (this.data.loading) return

    this.setData({ loading: true })

    try {
      const params = this.buildParams()
      const result = await this.fetchData(params)

      this.handleDataResult(result, refresh)
    } catch (error) {
      this.handleError(error)
    } finally {
      this.setData({ loading: false })
    }
  },

  /**
   * 构建请求参数
   */
  buildParams() {
    return {
      pageNum: this.data.pageNum,
      pageSize: this.data.pageSize,
      keyword: this.data.searchKeyword,
      ...this.data.filters
    }
  },

  /**
   * 获取数据（子类实现）
   */
  async fetchData(params) {
    throw new Error('fetchData method must be implemented')
  },

  /**
   * 处理数据结果
   */
  handleDataResult(result, refresh) {
    const newList = refresh ? result.records : [...this.data.list, ...result.records]

    this.setData({
      list: newList,
      hasMore: result.pageNum < result.totalPages,
      pageNum: refresh ? 2 : this.data.pageNum + 1
    })
  },

  /**
   * 刷新数据
   */
  async refreshData() {
    this.setData({ pageNum: 1 })
    await this.loadData(true)
  },

  /**
   * 加载更多
   */
  async loadMore() {
    if (!this.data.hasMore || this.data.loading) return
    await this.loadData()
  },

  /**
   * 搜索
   */
  onSearch(event) {
    this.setData({ searchKeyword: event.detail.value })
    this.refreshData()
  },

  /**
   * 筛选
   */
  onFilterChange(event) {
    const { key, value } = event.currentTarget.dataset
    this.setData({
      [`filters.${key}`]: value
    })
    this.refreshData()
  },

  /**
   * 列表项点击
   */
  onItemTap(event) {
    const item = event.currentTarget.dataset.item
    this.handleItemTap(item)
  },

  /**
   * 处理列表项点击（子类实现）
   */
  handleItemTap(item) {
    // 默认跳转到详情页
    wx.navigateTo({
      url: `/pages/detail/detail?id=${item.id}`
    })
  },

  /**
   * 错误处理
   */
  handleError(error) {
    console.error('加载数据失败:', error)
    wx.showToast({ title: '加载失败', icon: 'error' })
  }
})
```

## 🌐 API接口设计

### 接口基础配置

#### 基础URL配置
```javascript
// utils/api.js
const API_CONFIG = {
  // 小程序API基础路径（对应后端miniapp模块）
  BASE_URL: 'https://api.shootsunrise.com/miniapp',

  // 请求超时时间
  TIMEOUT: 10000,

  // API版本
  VERSION: 'v1'
}

// 构建完整API路径
const buildApiUrl = (path) => {
  return `${API_CONFIG.BASE_URL}/api/${API_CONFIG.VERSION}${path}`
}
```

### API接口设计规范

#### 通用接口模式
```javascript
// RESTful API 设计模式

// 1. 列表查询接口
export const getList = (resource, params) => {
  return request({
    url: buildApiUrl(`/${resource}`),
    method: 'GET',
    data: params // { pageNum, pageSize, ...filters }
  })
}

// 2. 详情查询接口
export const getDetail = (resource, id) => {
  return request({
    url: buildApiUrl(`/${resource}/${id}`),
    method: 'GET'
  })
}

// 3. 创建资源接口
export const createResource = (resource, data) => {
  return request({
    url: buildApiUrl(`/${resource}`),
    method: 'POST',
    data: data
  })
}

// 4. 更新资源接口
export const updateResource = (resource, id, data) => {
  return request({
    url: buildApiUrl(`/${resource}/${id}`),
    method: 'PUT',
    data: data
  })
}

// 5. 删除资源接口
export const deleteResource = (resource, id) => {
  return request({
    url: buildApiUrl(`/${resource}/${id}`),
    method: 'DELETE'
  })
}
```

#### 认证接口模板
```javascript
// 认证相关接口模板
export const authAPI = {
  // 登录接口
  login: (loginData) => {
    return request({
      url: buildApiUrl('/auth/login'),
      method: 'POST',
      data: loginData
    })
  },

  // 刷新Token
  refresh: (refreshToken) => {
    return request({
      url: buildApiUrl('/auth/refresh'),
      method: 'POST',
      data: { refreshToken }
    })
  },

  // 退出登录
  logout: () => {
    return request({
      url: buildApiUrl('/auth/logout'),
      method: 'POST'
    })
  }
}
```

### 文件上传API

#### 文件上传接口
```javascript
// 上传图片
export const uploadImage = (filePath, category = 'portfolio') => {
  return new Promise((resolve, reject) => {
    wx.uploadFile({
      url: buildApiUrl('/files/upload'),
      filePath: filePath,
      name: 'file',
      formData: {
        category: category
      },
      header: {
        'Authorization': `Bearer ${getToken()}`
      },
      success: (res) => {
        try {
          const data = JSON.parse(res.data)
          if (data.code === 200) {
            resolve(data.data)
          } else {
            reject(new Error(data.message))
          }
        } catch (error) {
          reject(error)
        }
      },
      fail: reject
    })
  })
}

// 批量上传图片
export const uploadImages = async (filePaths, category = 'portfolio') => {
  const uploadPromises = filePaths.map(filePath => uploadImage(filePath, category))
  return Promise.all(uploadPromises)
}
```

### 统一响应格式

#### 响应数据结构
```javascript
// 成功响应格式
{
  "code": 200,
  "message": "success",
  "data": {}, // 具体数据
  "timestamp": 1642752000000,
  "traceId": "abc123"
}

// 分页响应格式
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [], // 数据列表
    "total": 100,  // 总数
    "pageNum": 1,  // 当前页
    "pageSize": 10, // 每页大小
    "totalPages": 10 // 总页数
  },
  "timestamp": 1642752000000,
  "traceId": "abc123"
}

// 错误响应格式
{
  "code": 400,
  "message": "参数错误",
  "data": null,
  "timestamp": 1642752000000,
  "traceId": "abc123"
}
```

## 🎯 小程序前端开发计划

### 第一期开发计划 (8周)

#### 第一阶段：基础框架搭建 (2周)

**Week 1: 项目初始化**
- 小程序项目创建与配置
- Vant Weapp组件库集成
- 基础样式规范建立
- 公共组件开发（导航栏、底部栏等）

**Week 2: 数据管理与工具类**
- 数据管理工具开发
- 网络请求封装
- 认证工具类开发
- 图片处理工具开发

#### 第二阶段：用户认证模块 (1.5周)

**Week 3: 用户认证功能**
- 微信登录页面开发
- 角色切换功能实现
- 摄影师认证申请页面
- 用户信息管理页面

#### 第三阶段：作品展示模块 (2.5周)

**Week 4: 作品浏览功能**
- 作品列表页面开发
- 作品详情页面开发
- 搜索功能实现
- 分类筛选功能

**Week 5: 作品管理功能**
- 作品发布页面开发
- 图片上传组件开发
- 作品编辑功能
- 我的作品管理页面

#### 第四阶段：营销推广模块 (1.5周)

**Week 6: 营销活动功能**
- 营销活动列表页面
- 活动详情页面开发
- 活动创建页面开发
- 推广海报生成功能

#### 第五阶段：用户中心与完善 (1周)

**Week 7: 用户中心**
- 个人中心页面开发
- 收藏夹功能实现
- 关注列表功能
- 设置页面开发

**Week 8: 系统测试与优化**
- 功能测试与修复
- 性能优化
- 用户体验优化
- 小程序审核准备

### 第二期开发计划 (后期扩展)

#### 预约订单模块 (4周)
- **Week 1**: 服务套餐展示页面
- **Week 2**: 预约流程页面开发
- **Week 3**: 订单管理页面
- **Week 4**: 支付功能集成

#### 实时通讯模块 (3周)
- **Week 1**: 聊天界面开发
- **Week 2**: 消息推送集成
- **Week 3**: 聊天记录管理

### 页面开发优先级

#### 高优先级页面 (第一期必须完成)
1. **首页** - 作品展示和摄影师推荐
2. **登录页** - 微信授权登录
3. **作品列表页** - 作品浏览和搜索
4. **作品详情页** - 作品展示和互动
5. **作品发布页** - 摄影师发布作品
6. **个人中心** - 用户信息和功能入口
7. **营销活动页** - 活动展示和参与

#### 中优先级页面 (第一期选择性完成)
1. **摄影师列表页** - 摄影师发现
2. **摄影师详情页** - 摄影师信息展示
3. **收藏夹页面** - 用户收藏管理
4. **设置页面** - 应用设置

#### 低优先级页面 (第二期开发)
1. **预约页面** - 预约拍摄服务
2. **订单页面** - 订单管理
3. **聊天页面** - 实时通讯
4. **支付页面** - 支付功能

### 开发里程碑

| 里程碑 | 完成时间 | 主要成果 |
|--------|----------|----------|
| 基础框架完成 | Week 2 | 可运行的小程序框架，基础组件可用 |
| 用户认证完成 | Week 3 | 用户可以登录和切换角色 |
| 作品功能完成 | Week 5 | 用户可以浏览和发布作品 |
| 营销功能完成 | Week 6 | 摄影师可以创建和管理营销活动 |
| 第一期完成 | Week 8 | 完整的小程序应用，可以发布上线 |

### 技术要求

#### 性能要求
- 页面加载时间 ≤ 3秒
- 图片懒加载实现
- 列表虚拟滚动优化
- 代码分包加载

#### 兼容性要求
- 支持iOS 10+和Android 6.0+
- 适配不同屏幕尺寸
- 微信版本7.0+兼容

#### 用户体验要求
- 操作流程简洁明了
- 错误提示友好
- 加载状态明确
- 交互反馈及时

---

**文档状态：** ✅ 已完成
**下一步：** 按照开发计划开始小程序基础框架搭建
**联系人：** 开发团队
