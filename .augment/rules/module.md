---
type: "always_apply"
description: "æ•°æ®è¡¨æ¨¡å—åˆ†é…è§„èŒƒ"
---

# æ•°æ®è¡¨æ¨¡å—åˆ†é…è§„èŒƒ

## ğŸ“Š æ¨¡å—åˆ†é…åŸåˆ™

### ğŸ”§ Core æ¨¡å—ï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰
**èŒè´£ï¼š** ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ•°æ®è®¿é—®é€»è¾‘ï¼Œæä¾›æ•°æ®ä»“å‚¨æœåŠ¡

**åŒ…å«å†…å®¹ï¼š**
- **æ‰€æœ‰ Entity å®ä½“ç±»** - å¯¹åº”æ•°æ®åº“è¡¨ç»“æ„
- **æ‰€æœ‰ Mapper æ¥å£** - æ•°æ®è®¿é—®æ¥å£
- **æ‰€æœ‰ Repository å®ç°** - ä»“å‚¨å±‚é€»è¾‘

**Core æ¨¡å—åŒ…å«æ‰€æœ‰æ•°æ®è¡¨ï¼š**
- `users` - ç”¨æˆ·åŸºç¡€ä¿¡æ¯è¡¨
- `photographer_profiles` - æ‘„å½±å¸ˆè®¤è¯ä¿¡æ¯è¡¨
- `user_roles` - ç”¨æˆ·è§’è‰²å…³è”è¡¨
- `portfolios` - ä½œå“é›†è¡¨
- `portfolio_categories` - ä½œå“åˆ†ç±»è¡¨
- `portfolio_tags` - ä½œå“æ ‡ç­¾è¡¨
- `portfolio_tag_relations` - ä½œå“æ ‡ç­¾å…³è”è¡¨
- `service_packages` - æœåŠ¡å¥—é¤è¡¨
- `bookings` - é¢„çº¦è¡¨
- `orders` - è®¢å•è¡¨
- `reviews` - è¯„ä»·è¡¨
- `favorites` - æ”¶è—è®°å½•è¡¨
- `user_likes` - ç”¨æˆ·ç‚¹èµè®°å½•è¡¨
- `user_follows` - ç”¨æˆ·å…³æ³¨å…³ç³»è¡¨
- `promotions` - è¥é”€æ´»åŠ¨è¡¨
- `promotion_participants` - è¥é”€æ´»åŠ¨å‚ä¸è®°å½•è¡¨
- `promotion_statistics` - è¥é”€æ´»åŠ¨ç»Ÿè®¡è¡¨
- `admin_users` - ç®¡ç†å‘˜ç”¨æˆ·è¡¨
- `audit_logs` - å†…å®¹å®¡æ ¸æ—¥å¿—è¡¨
- `system_statistics` - ç³»ç»Ÿç»Ÿè®¡æ•°æ®è¡¨
- `system_configs` - ç³»ç»Ÿé…ç½®è¡¨
- `operation_logs` - æ“ä½œæ—¥å¿—è¡¨
- `file_uploads` - æ–‡ä»¶ä¸Šä¼ è®°å½•è¡¨
- `notifications` - ç³»ç»Ÿé€šçŸ¥è¡¨

### ğŸ“± Miniapp æ¨¡å—ï¼ˆå°ç¨‹åºä¸šåŠ¡å±‚ï¼‰
**èŒè´£ï¼š** å®ç°å°ç¨‹åºç«¯çš„ä¸šåŠ¡é€»è¾‘ï¼Œé¢å‘Cç«¯ç”¨æˆ·

**åŒ…å«å†…å®¹ï¼š**
- **Service æ¥å£å’Œå®ç°** - å°ç¨‹åºä¸šåŠ¡é€»è¾‘
- **Controller æ§åˆ¶å™¨** - å°ç¨‹åºAPIæ¥å£
- **DTO/VO/BO æ¨¡å‹** - å°ç¨‹åºæ•°æ®ä¼ è¾“å¯¹è±¡

**ä¸šåŠ¡èŒƒå›´ï¼š**
- ç”¨æˆ·è®¤è¯ä¸ç®¡ç†
- ä½œå“å±•ç¤ºä¸æµè§ˆ
- æ‘„å½±å¸ˆæœåŠ¡é¢„è®¢
- è®¢å•ç®¡ç†ä¸æ”¯ä»˜
- ç”¨æˆ·äº’åŠ¨åŠŸèƒ½
- è¥é”€æ´»åŠ¨å‚ä¸

### ğŸ–¥ï¸ Admin æ¨¡å—ï¼ˆç®¡ç†åå°ä¸šåŠ¡å±‚ï¼‰
**èŒè´£ï¼š** å®ç°ç®¡ç†åå°çš„ä¸šåŠ¡é€»è¾‘ï¼Œé¢å‘Bç«¯ç®¡ç†å‘˜

**åŒ…å«å†…å®¹ï¼š**
- **Service æ¥å£å’Œå®ç°** - ç®¡ç†åå°ä¸šåŠ¡é€»è¾‘
- **Controller æ§åˆ¶å™¨** - ç®¡ç†åå°APIæ¥å£
- **DTO/VO/BO æ¨¡å‹** - ç®¡ç†åå°æ•°æ®ä¼ è¾“å¯¹è±¡

**ä¸šåŠ¡èŒƒå›´ï¼š**
- ç®¡ç†å‘˜è®¤è¯ä¸æƒé™
- ç”¨æˆ·ç®¡ç†ä¸å®¡æ ¸
- å†…å®¹å®¡æ ¸ä¸ç®¡ç†
- ç³»ç»Ÿé…ç½®ç®¡ç†
- æ•°æ®ç»Ÿè®¡åˆ†æ
- è¿è¥ç®¡ç†åŠŸèƒ½

## ğŸ—ï¸ æ¨¡å—ä¾èµ–å…³ç³»

### ä¾èµ–å±‚æ¬¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Miniapp   â”‚    â”‚    Admin    â”‚
â”‚   Module    â”‚    â”‚   Module    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    Core     â”‚
        â”‚   Module    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾èµ–è§„åˆ™
1. **Miniapp** ä¾èµ– **Core** æ¨¡å—
2. **Admin** ä¾èµ– **Core** æ¨¡å—  
3. **Miniapp** å’Œ **Admin** ä¹‹é—´ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸ç›´æ¥ä¾èµ–

## ğŸ“‹ å®ä½“ç±»åˆ›å»ºè§„èŒƒ

### Core æ¨¡å—å®ä½“ç±»
**ä½ç½®ï¼š** `shoot-sunrise-core/src/main/java/com/shootsunrise/core/entity/`

**å‘½åè§„èŒƒï¼š**
- å®ä½“ç±»åä½¿ç”¨å¤§é©¼å³°å‘½åæ³•
- å¯¹åº”æ•°æ®åº“è¡¨åï¼ˆä¸‹åˆ’çº¿è½¬é©¼å³°ï¼‰
- å¿…é¡»ç»§æ‰¿ `BaseEntity`

**ç¤ºä¾‹ï¼š**
```java
@Data
@EqualsAndHashCode(callSuper = true)
@TableName("users")
public class User extends BaseEntity {
    // å­—æ®µå®šä¹‰...
}
```

### Miniapp æ¨¡å—å®ä½“ç±»
**ä½ç½®ï¼š** `shoot-sunrise-miniapp/src/main/java/com/shootsunrise/miniapp/entity/`

**ä¾èµ–å…³ç³»ï¼š**
- å¯ä»¥å¼•ç”¨ Core æ¨¡å—çš„å®ä½“ç±»
- ä¸èƒ½å¼•ç”¨ Admin æ¨¡å—çš„å®ä½“ç±»

### Admin æ¨¡å—å®ä½“ç±»
**ä½ç½®ï¼š** `shoot-sunrise-admin/src/main/java/com/shootsunrise/admin/entity/`

**ä¾èµ–å…³ç³»ï¼š**
- å¯ä»¥å¼•ç”¨ Core æ¨¡å—çš„å®ä½“ç±»
- ä¸èƒ½å¼•ç”¨ Miniapp æ¨¡å—çš„å®ä½“ç±»

## ğŸ”§ Mapper æ¥å£åˆ›å»ºè§„èŒƒ

### ç»§æ‰¿è§„èŒƒ
æ‰€æœ‰ Mapper æ¥å£å¿…é¡»ç»§æ‰¿ `BaseMapperX<T>`ï¼š

```java
public interface UserMapper extends BaseMapperX<User> {
    // è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•...
}
```

### æ¨¡å—åˆ†é…
- **Core æ¨¡å—ï¼š** æ‰€æœ‰è¡¨å¯¹åº”çš„ Mapper æ¥å£éƒ½åœ¨ Core æ¨¡å—ä¸­
- **Miniapp æ¨¡å—ï¼š** ä¸åŒ…å« Mapper æ¥å£
- **Admin æ¨¡å—ï¼š** ä¸åŒ…å« Mapper æ¥å£

## ğŸ›ï¸ ä»“å‚¨å±‚æ¶æ„è§„èŒƒ

### Core æ¨¡å—ä»“å‚¨å±‚èŒè´£
**Core æ¨¡å—åªå®ç°ä»“å‚¨å±‚ï¼ˆRepositoryï¼‰é€»è¾‘ï¼Œä¸å®ç°ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆServiceï¼‰**

**Core æ¨¡å—åŒ…å«ï¼š**
- `Entity` - å®ä½“ç±»
- `Mapper` - æ•°æ®è®¿é—®æ¥å£
- `Repository` - ä»“å‚¨å±‚å®ç°

**Core æ¨¡å—ä¸åŒ…å«ï¼š**
- `Service` - ä¸šåŠ¡é€»è¾‘å±‚
- `Controller` - æ§åˆ¶å™¨å±‚
- `DTO/VO/BO` - ä¸šåŠ¡æ¨¡å‹

### ä»“å‚¨å±‚å®ç°è§„èŒƒ
```java
// Core æ¨¡å—ä»“å‚¨å±‚ç¤ºä¾‹
@Repository
public class UserRepositoryImpl implements UserRepository {

    @Resource
    private UserMapper userMapper;

    @Override
    public User findById(Long id) {
        return userMapper.selectById(id);
    }

    @Override
    public PageResult<User> findPage(UserPageRequest request) {
        return userMapper.selectPage(request, buildQueryWrapper(request));
    }

    // å…¶ä»–æ•°æ®è®¿é—®æ–¹æ³•...
}
```

### å…¶ä»–æ¨¡å—è°ƒç”¨è§„èŒƒ
**Miniapp å’Œ Admin æ¨¡å—çš„ ServiceImpl ç›´æ¥è°ƒç”¨ Core æ¨¡å—çš„ Repository**

```java
// Miniapp/Admin æ¨¡å—ä¸šåŠ¡å±‚ç¤ºä¾‹
@Service
public class UserServiceImpl implements UserService {

    @Resource
    private UserRepository userRepository; // ç›´æ¥æ³¨å…¥ Core æ¨¡å—çš„ Repository

    @Override
    public UserVO getUserInfo(Long userId) {
        // 1. è°ƒç”¨ Core æ¨¡å—ä»“å‚¨å±‚è·å–æ•°æ®
        User user = userRepository.findById(userId);

        // 2. ä¸šåŠ¡é€»è¾‘å¤„ç†
        if (user == null) {
            throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
        }

        // 3. æ•°æ®è½¬æ¢
        return BeanUtil.copyProperties(user, UserVO.class);
    }
}
```

## ğŸ¯ è®¾è®¡ä¼˜åŠ¿

### 1. æ¨¡å—èŒè´£æ¸…æ™°
- æ¯ä¸ªæ¨¡å—ä¸“æ³¨äºç‰¹å®šçš„ä¸šåŠ¡é¢†åŸŸ
- é¿å…åŠŸèƒ½æ··ä¹±å’ŒèŒè´£ä¸æ˜

### 2. ä¾èµ–å…³ç³»åˆç†
- é¿å…å¾ªç¯ä¾èµ–
- ä¿æŒæ¶æ„æ¸…æ™°
- ä¾¿äºç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•

### 3. æ‰©å±•æ€§è‰¯å¥½
- ä¾¿äºåç»­åŠŸèƒ½æ‰©å±•
- æ”¯æŒæ¨¡å—ç‹¬ç«‹éƒ¨ç½²
- æ˜“äºç»´æŠ¤å’Œå‡çº§

### 4. å¤ç”¨æ€§é«˜
- Core æ¨¡å—æä¾›å…¬å…±æœåŠ¡
- é¿å…é‡å¤å¼€å‘
- ç»Ÿä¸€æ•°æ®è®¿é—®å±‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸¥æ ¼éµå¾ªæ¨¡å—åˆ†é…**ï¼šä¸å¾—éšæ„å°†ä¸šåŠ¡é€»è¾‘åˆ†é…åˆ°é”™è¯¯çš„æ¨¡å—
2. **ä¾èµ–æ–¹å‘æ§åˆ¶**ï¼šä¸‹å±‚æ¨¡å—ä¸èƒ½ä¾èµ–ä¸Šå±‚æ¨¡å—
3. **å®ä½“ç±»ä½ç½®**ï¼šæ‰€æœ‰å®ä½“ç±»éƒ½å¿…é¡»æ”¾åœ¨ Core æ¨¡å—çš„ entity åŒ…ä¸‹
4. **Core æ¨¡å—èŒè´£é™åˆ¶**ï¼šCore æ¨¡å—åªå®ç° Repository å±‚ï¼Œä¸å®ç° Service å±‚
5. **è·¨æ¨¡å—æ•°æ®è®¿é—®**ï¼šå…¶ä»–æ¨¡å—çš„ ServiceImpl ç›´æ¥æ³¨å…¥å¹¶è°ƒç”¨ Core æ¨¡å—çš„ Repository
6. **ç¦æ­¢ç›´æ¥è°ƒç”¨ Mapper**ï¼šä¸šåŠ¡å±‚ä¸å¾—ç›´æ¥è°ƒç”¨ Mapperï¼Œå¿…é¡»é€šè¿‡ Repository å±‚
7. **æ¨¡å—ä¸šåŠ¡åˆ’åˆ†**ï¼šæ¨¡å—åˆ’åˆ†åªæ¶‰åŠ Service å’Œ Controllerï¼Œæ‰€æœ‰æ•°æ®è®¿é—®å±‚éƒ½åœ¨ Core ä¸­
